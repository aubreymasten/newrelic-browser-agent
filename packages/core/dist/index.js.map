{"version":3,"file":"index.js","mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;;;;;;;;;;;ACVA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEO;AACP;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;ACnBA;AACA;AACA;AACA;;AAE0E;AACjB;;AAEzD,sBAAsB,0EAAiB;;AAEvC;AACA;AACA,YAAY,kEAAS;AACrB;;AAEA,YAAY,QAAQ,2EAAiB,eAAe,qFAAsB;AAC1E;AACA;;AAE0C;;AAEH;;AAEhC;AACP;AACA;;AAEO;AACP;AACA;;AAEO;AACP;AACA;AACA,kBAAkB,sBAAsB;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEO;AACP;AACA;AACA,kBAAkB,sBAAsB;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;;AAEO;AACP;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;;AAEO;AACP;;AAEA;AACA;;;;;;;;;;;;AC5GO,0BAA0B,OAAgB;AAC1C,6BAA6B,MAAmB,OAAO,MAAmB,CAAC;;;;;;;;;;;;;;;;;ACDlF;AACA;AACA;AACA;;AAE0C;AACG;AACL;;AAExC;;AAEA;AACA,SAAS,iEAAQ;AACjB;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;;AAEA;AACA;;AAEuB;;AAEY;;AAEnC;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,MAAM;AACN,aAAa,mEAAQ;AACrB,MAAM;AACN;AACA;AACA;;AAEA;AACA;AACA;AACA,oCAAoC;AACpC;AACA;;AAEA;AACA;AACA;;AAEA;AACA,0CAA0C,yBAAyB;AACnE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,oBAAoB,SAAS;;AAE7B;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,oBAAoB,sBAAsB;AAC1C;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,IAAI,+DAAM;AACV;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACO;AACP,SAAS,mEAAQ;AACjB;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;ACtLA;AACA;AACA;AACA;;AAEqD;AAC9C,eAAe,kDAAS;AACxB,eAAe,mEAAU;;AAEhC;AACA;AACiC;;AAE1B;AACP;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;;;;;;;;;;ACtBA;AACA;AACA,qCAAqC;AACrC;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,EAAE;;AAEK;AACP,4BAA4B,sCAAsC;AAClE;;AAEA;;;;;;;;;;;;;;;;;;ACfA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;;;ACPA;AACA;AACA;AACA;;AAE0C;;AAE1C;AACA;;AAEA;;AAEO;AACP,MAAM,MAAM;AACZ;AACA;AACA;AACA;AACA;;AAEO;AACP;AACA;;AAEO;AACP;AACA;;AAEO;AACP;AACA;;;;;;;;;;;;AC9BA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACO;AACP;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;;AAEP;AACA,MAAM;AACN;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;;;;;;;;;;ACnCA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;;;;;;;;;;;;;;;ACrByD;;AAElD;AACP,mCAAmC,2EAAQ,CAAC,IAAI,8EAAW,CAAC;AAC5D;AACA;AACA,WAAW,8EAAW;AACtB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGO;AACP;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEO;AACP;AACA;AACA;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;ACzFA;AACA;AACA;AACA;;AAEA;AACO;AACP;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;AChBA;AACA;AACA;AACA;;AAEO,SAAS,aAAM;AACtB;AACA;AACA;AACA;AACA;;AAEA,UAAU,gBAAgB;AAC1B;AACA;;AAEA;AACA;;;ACjBA;AACA;AACA;AACA;;AAEA;AACA;;AAEO;AACP;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;;AAEA;AACO;AACP;AACA;;;AC/BA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0DAA0D;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACoD;AACC;;AAErD;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEO;AACP;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,YAAY,qBAAqB;AACjC;AACA;AACA;AACA;AACA;;AAEA,kBAAkB,aAAM;AACxB;AACA;AACA,KAAK;AACL;;AAEA;;AAEA;AACA;AACA;AACA;AACA,mBAAmB,gBAAgB;AACnC;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA,aAAa;AACb;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,KAAK;AACL,GAAG;AACH;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;AC1OA;AACA;AACA;AACA;;AAEO;AACP;AACA;;AAEA;AACA,kBAAkB,mBAAmB;AACrC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;;;ACnBA;AACA;AACA;AACA;;AAEwC;;AAExC;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEqC;AACL;;AAEhC;AACA;AACA;;AAEA;AACO;AACP;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,iCAAiC;AACjC;AACA,EAAE,0BAAM;AACR;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,uBAAuB;;AAEvB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,cAAc;AACd,IAAI;AACJ;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,EAAE,0BAAM;AACR;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,MAAM,OAAO;AACb;AACA;AACA,GAAG;AACH;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,4CAA4C;AAC5C;AACA;AACA;AACA;AACA;AACA;;AAEO;AACP;AACA;AACA;AACA;AACA;;AAEA;AACO;AACP;AACA;AACA;AACA,kBAAkB,kBAAkB;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,SAAS,yBAAM;AACf;;AAEA;AACA;AACA;;;;;AC1LA;AACA;AACA;AACA;;AAE6C;;AAE7C;AACmC;AACU;;AAE7C;;AAEA;AACA;;AAEO;AACP;AACA,oCAAoC,uBAAQ;AAC5C;;AAEA;AACA,8BAA8B,uBAAQ;AACtC;;AAEA;AACA;AACA,gBAAgB,uBAAQ;;AAExB;;AAEA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;;;;;ACtCA;AACA;AACA;AACA;;AAEgC;AACiB;;AAEjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEO;AACP;AACA,oBAAoB,QAAQ;AAC5B,IAAI;AACJ;AACA,MAAM,qBAAO;AACb,MAAM;AACN;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;;AAEA;AACA;AACA;AACA;AACA,wBAAwB,YAAY;AACpC;AACA;;AAEA;AACA;;AAEA,MAAM,yBAAM;AACZ;AACA;AACA,OAAO;;AAEP,uCAAuC,MAAM,0BAA0B;AACvE;AACA;;;ACxEA;AACA;AACA;AACA;;AAEsC;AACK;;AAE3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;;AAEA,eAAe,yBAAM,yBAAyB,UAAU;AACxD;;AAEA;AACA;AACA;;AAEA;AACA;AACO;AACP;AACA;AACA;;AAEA,mBAAmB;;AAEZ;AACP;AACA,kBAAkB,eAAe;AACjC;AACA;AACA;AACA;AACA;;AAEO;AACP;AACA;;AAEA,EAAE,0BAAM;AACR;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA,kBAAkB,sBAAsB;AACxC,kBAAkB,SAAS;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACO;AACP;AACA;AACA;AACA;AACA;;;AC5EA;AACA;AACA;AACA;;AAEO;AACP;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAI;;AAEJ;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;AC3CA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEO;AACP;AACA;;;;;ACXA;AACA;AACA;AACA;;AAEA;AACA;AACO;AACP;AACA;;AAEA;;;;;;;;;;;ACXA;AACA;AACA;AACA;;AAEwC;AAC4B;AACzB;AACG;AACT;AACM;AACD;AACD;AACR;AACsC;AAChB;AACiB;;AAExE,gBAAgB,oCAAU;AAC1B;AACA;AACA;AACA;AACA,2BAA2B,4BAA4B;AACvD,uBAAuB,4BAA4B;;AAEnD;AACA;AACO,gBAAgB,oBAAS,QAAQ,oBAAS;;AAEjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEyC;;AAEzC;AACA;AACA,6BAA6B,cAAc;AAC3C,GAAG;AACH;AACA;;AAEA,qBAAqB;;AAErB;AACA;AACA;AACA;;AAEA,kBAAkB,sBAAsB;AACxC;AACA;AACA,4BAA4B,yBAAM;AAClC,0BAA0B,yBAAM;AAChC;AACA,WAAW;AACX;;AAEA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB;AACA,WAAW,QAAQ;AACnB,WAAW,MAAM;AACjB,WAAW,MAAM;AACjB;AACO;AACP;AACA;AACA;AACA;AACA,mCAAmC,cAAc;AACjD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB;AACA,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB;AACA,WAAW,QAAQ;AACnB,WAAW,MAAM;AACjB,WAAW,MAAM;AACjB;AACO;AACP;AACA;AACA,0BAA0B,yBAAM;AAChC,wBAAwB,yBAAM;;AAE9B,kBAAkB;AAClB;AACA;;AAEA;AACA,aAAa,cAAc;AAC3B;AACA;;AAEA;AACA;AACA;AACA,mBAAmB,aAAa;AAChC;AACA;AACA;;AAEA;;AAEA;AACA;AACA,yBAAyB,GAAS,aAAa,uBAAuB;;AAEtE;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAI;AACJ,WAAW,SAAS;AACpB,IAAI;AACJ,oBAAoB,GAAS,eAAe,uBAAuB;AACnE;;AAEA;;AAEA;AACA,+BAA+B,cAAc;AAC7C;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,QAAQ;AACR;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK,EAAE,gDAAiB;AACxB;;AAEA;AACA,4BAA4B,iBAAiB;AAC7C,aAAa,cAAc;AAC3B,0BAA0B,GAAS,eAAe,uBAAuB;AACzE;;AAEA;AACA;;AAEO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA,eAAe,cAAc;AAC7B,MAAM;AACN;AACA;AACA,IAAI;AACJ;AACA,8BAA8B,iBAAiB,GAAG,cAAc;AAChE,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA,eAAe,cAAc;AAC7B,MAAM;AACN,eAAe,cAAc;AAC7B,MAAM;AACN;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,mCAAmC,KAAW;AAC9C,SAAS,KAAW;AACpB;;AAEO;AACP;AACA;AACA;;AAEO;AACP;AACA;AACA,GAAG;AACH;;AAEA;AACO;AACP;AACA,eAAe,uBAAuB;AACtC;AACA;AACA;;AAEA,aAAa,cAAc;;AAE3B;AACA;AACA,IAAI,KAAW;AACf,IAAI,KAAW;AACf;AACA,IAAI,KAAW,OAAO,gCAAgC;AACtD,cAAc,mBAAG;AACjB;AACA,IAAI,KAAW,QAAQ,QAAQ,CAAC,WAAW;AAC3C,IAAI,KAAW,UAAU,mBAAmB,QAAQ,mBAAmB;AACvE;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AC3QA;AACA;AACA;AACA;;AAEwD;AACR;;AAEhD;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAuB,eAAe;AACtC;AACA;;AAEA,wCAAwC,cAAc;AACtD,yCAAyC,cAAc;AACvD;AACA;AACA,sBAAsB,oBAAoB;AAC1C;AACA,QAAQ,IAAI;AACZ;AACA;AACA,IAAI;AACJ;AACA,IAAI,KAAK;AACT;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;;;AClGA;AACA;AACA;AACA;;AAE+D;AACR;AACN;AACE;;AAEQ;AACyC;AAChD;AACwB;AAClB;AACG;AACR;AACkC;AACvC;AAC0B;AAClB;;AAExD;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEO;AACP;AACA,EAAE,eAAQ;AACV,EAAE,eAAQ;;AAEV;AACA,IAAI,cAAM;AACV,IAAI,cAAM;AACV;;AAEA,2BAA2B,gCAAqB;;AAEhD,EAAE,EAAE;AACJ,sBAAsB,gBAAgB,eAAe,+BAA+B;AACpF;AACA;;AAEA;AACA;AACA,aAAa,IAAQ;;AAErB;AACA;AACA;;AAEA,kBAAkB;AAClB,mBAAmB,SAAS,CAAC,yBAAkB;;AAE/C,wBAAwB;AACxB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,IAAI,yBAAM;AACV,sBAAsB,kBAAkB;AACxC;AACA;AACA,QAAQ,YAAS;AACjB;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA,SAAS,cAAc;AACvB;;AAEA;AACA,kCAAkC,cAAc,CAAC,SAAS;AAC1D;;AAEA;AACA;;AAEA,mBAAmB,QAAQ;AAC3B;AACA;AACA,IAAI;AACJ;AACA;AACA;;AAEA;AACA;;AAEA,kBAAkB,6BAA6B;AAC/C;AACA,eAAe,qBAAqB;;AAEpC;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,QAAQ,CAAC,qBAAc;;AAE7C,kBAAkB,6BAA6B;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEO;AACP;AACA,iBAAiB,mBAAG;AACpB,mBAAmB,sBAAe,IAAI,sBAAe;;AAErD,wCAAwC,iBAAiB;AACzD;;AAEA;AACA,eAAe,cAAc;AAC7B;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,yBAAyB,YAAY;AACrC,IAAI;AACJ,gCAAgC,cAAc;AAC9C;AACA,sBAAsB,SAAS,CAAC,yBAAkB;;AAElD;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,qBAAqB;;AAErB;AACA;AACA,EAAE,0BAAM;;AAER;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA,cAAc,kBAAO;AACrB,IAAI,0BAAM;AACV;AACA,MAAM,yBAAM;AACZ;;AAEA,2BAA2B,cAAc,CAAC,SAAS;AACnD;AACA,IAAI,iBAAS;AACb;;AAEA;AACA,0DAA0D,SAAS;AACnE;AACA;;AAEA,mBAAS;AACT;;AAEA;AACA;AACA;AACA;;AAEA,IAAI,0BAAM;AACV,IAAI,0BAAM;AACV,IAAI,0BAAM;;AAEV;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,2BAA2B,cAAc,CAAC,SAAS;AACnD;;AAEA,IAAI,iBAAS;;AAEb;AACA,4DAA4D,SAAS;AACrE;AACA,GAAG;AACH;AACA,CAAC;;AAED,mBAAS;AACT;;AAEA;AACA;AACA;AACA;;AAEA,IAAI,0BAAM;AACV,IAAI,0BAAM;AACV,IAAI,0BAAM;;AAEV;AACA;AACA;;AAEA;AACA,2BAA2B,cAAc,CAAC,SAAS;AACnD;;AAEA,IAAI,iBAAS;;AAEb;AACA,4DAA4D,SAAS;AACrE;AACA,GAAG;AACH;AACA,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACxRD;AACA;AACA;AACA;;AAEiE;AAChC;AACK;AACM;AACrC,SAAS,mCAAY;;AAE5B,iDAAe,kDAAE;AACW;;AAE5B;AACA;AACA;AACA,kBAAkB,mGAAmD;AACrE;AACA;AACA;AACA;AACA;;AAEO;AACP;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;;;AC/EA;AACA;AACA;AACA;;AAEiD;AAChB;AACjC;AACA;AACA;;AAEA,oDAAe,wBAAwB;;AAEhC;AACP,wBAAwB,gBAAE;;AAE1B;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,eAAe,sBAAK;;AAEpB;AACA;AACA,UAAU;AACV;AACA;AACA,QAAQ;AACR;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,QAAQ;AACR;;AAEA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,gBAAgB,oBAAoB;AACpC;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;;AAEA;AACA,wBAAwB,gBAAE;AAC1B;AACA;AACA,IAAI;AACJ;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,kBAAkB;AAC/C,gCAAgC,iBAAiB;AACjD,SAAS;AACT,OAAO;AACP;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEO;AACP;AACA;AACA,oBAAoB,gBAAE;AACtB;AACA;;AAEO;AACP;AACA;AACA;;AAEO;AACP;AACA;AACA,kBAAkB,SAAS;AAC3B;AACA;AACA;AACA;;;AC9JA;AACA;AACA;AACA;;AAEiE;AACF;AACxD,IAAI,aAAE,GAAG,mCAAY;AAC5B,aAAa,wBAAG,CAAC,aAAE;;AAEnB;AACA;AACA;AACA;AACA;;AAEA,iDAAe,aAAE;;AAEjB;AACA;AACA;AACA;;AAEA,aAAE;AACF,aAAE;;AAEF;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AClCA;AACA;AACA;AACA;;AAEA;AACiE;AACF;AACxD,IAAI,WAAE,GAAG,mCAAY;AAC5B,IAAI,eAAM,GAAG,wBAAG,CAAC,WAAE;;AAEnB;;AAEA,+CAAe,WAAE;;AAEjB,eAAM;AACN;AACA;AACA;AACA;AACA;;AAEA,WAAE;AACF;AACA,YAAY,eAAM;AAClB,CAAC;;;ACzBD;AACA;AACA;AACA;;AAEA;AACiE;AACF;AACxD,IAAI,eAAE,GAAG,mCAAY;AAC5B,IAAI,mBAAM,GAAG,wBAAG,CAAC,eAAE;;AAEnB,mDAAe,+DAAE;;AAEjB,IAAI,sBAAS;AACb;AACA,IAAI,sBAAS,IAAI,sBAAS,cAAc,sBAAS;AACjD,WAAW,sBAAS;AACpB;AACA;AACA,mBAAM;;;;;ACnBN;AACA;AACA;AACA;;AAEuE;AACN;AACF;;AAExD,IAAI,aAAE,GAAG,mCAAY;AAC5B,IAAI,iBAAM,GAAG,wBAAG,CAAC,aAAE;;AAEnB,iDAAe,6DAAE;;AAEjB;AACA;AACA;AACA;;AAEA;AACA,EAAE,eAAI;AACN;;AAEA,SAAS,eAAI;AACb;AACA;AACA;AACA;AACA;AACA,IAAI,iBAAM;AACV,IAAI;AACJ,IAAI,iBAAM;AACV,IAAI,iBAAM;AACV,IAAI,iBAAM;AACV;AACA;;AAEA,aAAE;AACF;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,EAAE,iBAAM;;AAER,sCAAsC,gDAAiB;AACvD,wCAAwC,gDAAiB;AACzD,EAAE,aAAE;;AAEJ;AACA,IAAI,aAAE;AACN,2CAA2C,gDAAiB;AAC5D,6CAA6C,gDAAiB;AAC9D;;AAEA;AACA,IAAI,aAAE;AACN,IAAI,aAAE;AACN,2CAA2C,gDAAiB;AAC5D,6CAA6C,gDAAiB;AAC9D;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AC5HA;AACA;AACA;AACA;AACiE;AACF;AACrB;;AAEnC,IAAI,gBAAE,GAAG,mCAAY;AAC5B,IAAI,oBAAM,GAAG,wBAAG,CAAC,gBAAE;AACnB,uBAAuB,mBAAY;;AAEnC,oDAAe,gEAAE;;AAEjB;AACA;AACA;AACA,kCAAkC,oBAAM;AACxC,MAAM;AACN;AACA;AACA;;AAEA;AACA;;;ACxBA;AACA;AACA;AACA;AAC4F;AACV;AAC5C;AACI;AACnC,gBAAgB,mCAAY;AACnC,iBAAiB,oCAAe;AAChC,qBAAqB,wBAAM;AAC3B,sBAAsB,mBAAY;;AAElC,mDAAe,yDAAS;;AAExB;AACA,EAAE,iBAAI;AACN;;AAEA,SAAS,iBAAI;AACb;;AAEA,GAAG;AACH;AACA;AACA;AACA,MAAM,0BAAM;AACZ;AACA,OAAO;;AAEP;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;AACA;;AAEA,4CAA4C,cAAc,uBAAuB;AACjF;AACA,qBAAqB;AACrB,MAAM;;AAEN,EAAE,0BAAM;AACR;AACA;AACA,MAAM;AACN;AACA;AACA,GAAG;;AAEH;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA,EAAE,WAAW;AACb;AACA;AACA,iBAAiB,iBAAiB;;AAElC;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;;;ACrIA;AACA;AACA;AACA;;AAEA;AACiE;AACF;AACpB;AACpC,IAAI,cAAE,GAAG,mCAAY;AAC5B,IAAI,kBAAM,GAAG,wBAAG,CAAC,cAAE;;AAEnB;AACA;AACA;;AAEA,kDAAe,cAAE;;AAEjB;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;;AAEA,cAAE;AACF;AACA;AACA;AACA;AACA;AACA;;AAEA,gBAAgB,8BAAQ;AACxB;AACA;AACA;AACA,KAAK;;AAEL,sBAAsB,kBAAM;;AAE5B;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA,CAAC;;AAED,cAAE;AACF;AACA,CAAC;;AAED;AACA;AACA,6DAA6D;AAC7D,cAAc;AACd;;AAEA;AACA;AACA,EAAE,kBAAM;AACR;;AAEA;AACA;AACA;AACA;;;ACvEA;AACA;AACA;AACA;;AAEA;AACsB;AACtB;AACiE;AACM;AACR;AACrB;;AAE1C,aAAa,2BAAQ;AACd,IAAI,WAAE;AACb,IAAI,eAAM,GAAG,wBAAG,CAAC,WAAE;;AAEnB,cAAc,oBAAa;AAC3B,IAAI,yBAAgB,GAAG,mBAAY;AACnC,IAAI,gBAAO,GAAG,mBAAY;AAC1B,mBAAmB,mBAAY;;AAE/B;;AAEA;AACA;;AAEA,+CAAe,WAAE;;AAEjB,IAAI,YAAG;AACP;AACA;AACA,IAAI,WAAE;AACN,sDAAsD,gDAAiB;AACvE,IAAI;AACJ;AACA,MAAM,WAAE;AACR,MAAM;AACN;AACA;AACA;;AAEA,aAAI,UAAU,YAAG;;AAEjB,YAAG;;AAEH;AACA,eAAM,SAAS,YAAG;;AAElB,WAAE;AACF;AACA;AACA,CAAC;AACD,WAAE;;AAEF;AACA,EAAE,eAAM;AACR;;AAEA;AACA;AACA,YAAY,WAAE;;AAEd;AACA;AACA,IAAI,WAAE;AACN;;AAEA,EAAE,eAAM;AACR;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,IAAI,yBAAgB;AACpB,iBAAiB,gBAAO,IAAI,gBAAO;AACnC,wBAAwB,gBAAO;AAC/B;AACA;AACA,QAAQ,yBAAgB,wCAAwC,qBAAqB;AACrF;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA,MAAM,yBAAgB;AACtB;AACA;AACA,MAAM;AACN;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;;AAEA;AACA,kBAAkB,wBAAwB;AAC1C;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,SAAS,aAAI;AACb;AACA;AACA;AACA;AACA;;;;;;ACtKiC;AACJ;AACF;AACI;AACF;AACG;AACD;AACJ;AACG;;AAE4B;;AAEnD;AACP,SAAS,WAAE;AACX;;AAEO,SAAS,cAAS;AACzB;AACA;AACA;;AAEO;AACP;AACA;;AAEO;AACP;AACA;;AAEO;AACP;AACA;;AAEO;AACP;AACA;;AAEO;AACP,SAAS,QAAE;AACX;;AAEO;AACP,SAAS,UAAE;AACX;;AAEO;AACP,SAAS,QAAE;AACX;;;AClDA;AACA;AACA;AACA;;AAE8D;AACT;;AAErD;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;;AAEA,iBAAiB,mBAAK,oCAAoC,gBAAgB;AAC1E,eAAe,mBAAK,4CAA4C,gBAAgB;AAChF;AACA;AACA,kBAAkB,yBAAM,8BAA8B,YAAY;AAClE;;AAEA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;;;ACnCA;AACA;AACA;AACA;;AAEuE;AACG;AACnB;AACP;AACU;AAC+D;AACxF;AACjB;;AAEhB;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEO;AACP;AACA;;AAEA;;AAEA;AACA;AACA,IAAI;AACJ;AACA;AACA,MAAM,SAAgB;AACtB,MAAM,OAAa;;AAEnB;AACA,QAAQ,gBAAgB;AACxB;;AAEA,UAAU,2BAAoB;AAC9B,QAAQ,OAAO;AACf;;AAEA;AACA;AACA;AACA;;AAEA,iCAAK;AACL;AACA,CAAC;;AAED,iCAAK;AACL;AACA,IAAI,8BAAQ;AACZ;AACA,KAAK;AACL;AACA;AACA;AACA,CAAC;;AAED,iCAAK;AACL;AACA;AACA,CAAC;;AAED,iCAAK;AACL,EAAE,0BAAM,aAAa,mBAAG;AACxB,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA,MAAM,yBAAM,aAAa,mBAAG;AAC5B,MAAM;AACN;AACA;;AAEA,wEAAwE,sBAAK;AAC7E;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,6BAA6B,mBAAG;AAChC,EAAE,0BAAM;AACR;;;;;;;;ACzGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,qBAAqB;AAChC,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;;ACrCa;AACb;AACA;AACA;AACA;AACA,eAAe,oCAAoC;AACnD;AACA;AACA,CAAC;AACD;AACA;AACA,CAAC;AACD;AACA,0CAA0C,4BAA4B;AACtE,CAAC;AACD;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,+DAA+D,iBAAiB;AAC5G;AACA,oCAAoC,MAAM,+BAA+B,YAAY;AACrF,mCAAmC,MAAM,mCAAmC,YAAY;AACxF,gCAAgC;AAChC;AACA,KAAK;AACL;AACA;AACA,cAAc,6BAA6B,0BAA0B,cAAc,qBAAqB;AACxG,iBAAiB,oDAAoD,qEAAqE,cAAc;AACxJ,uBAAuB,sBAAsB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC;AACxC,mCAAmC,SAAS;AAC5C,mCAAmC,WAAW,UAAU;AACxD,0CAA0C,cAAc;AACxD;AACA,8GAA8G,OAAO;AACrH,iFAAiF,iBAAiB;AAClG,yDAAyD,gBAAgB,QAAQ;AACjF,+CAA+C,gBAAgB,gBAAgB;AAC/E;AACA,kCAAkC;AAClC;AACA;AACA,UAAU,YAAY,aAAa,SAAS,UAAU;AACtD,oCAAoC,SAAS;AAC7C;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,YAAY;AACZ,eAAe,mBAAO,CAAC,GAAuC;AAC9D,mBAAmB,mBAAO,CAAC,GAAoD;AAC/E,cAAc,mBAAO,CAAC,GAAS;AAC/B,qBAAqB,mBAAO,CAAC,EAAsB;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sEAAsE,+BAA+B;AACrG;AACA,sEAAsE,wBAAwB;AAC9F,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,kBAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA,YAAY;AACZ;AACA;AACA,iEAAiE;AACjE;AACA;AACA;AACA;AACA;AACA,8EAA8E,oBAAoB,mBAAO,CAAC,GAAgD,KAAK;AAC/J;AACA;AACA;AACA,8EAA8E,oBAAoB,mBAAO,CAAC,GAA+C,KAAK;AAC9J;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK,IAAI;AACT;;;;;;;;;AC3Ia;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,sCAAsC,kBAAkB,KAAK;;;;;;;;;ACTjD;AACb;AACA;AACA;AACA;AACA,eAAe,oCAAoC;AACnD;AACA;AACA,CAAC;AACD;AACA;AACA,CAAC;AACD;AACA,0CAA0C,4BAA4B;AACtE,CAAC;AACD;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,+DAA+D,iBAAiB;AAC5G;AACA,oCAAoC,MAAM,+BAA+B,YAAY;AACrF,mCAAmC,MAAM,mCAAmC,YAAY;AACxF,gCAAgC;AAChC;AACA,KAAK;AACL;AACA;AACA,cAAc,6BAA6B,0BAA0B,cAAc,qBAAqB;AACxG,iBAAiB,oDAAoD,qEAAqE,cAAc;AACxJ,uBAAuB,sBAAsB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC;AACxC,mCAAmC,SAAS;AAC5C,mCAAmC,WAAW,UAAU;AACxD,0CAA0C,cAAc;AACxD;AACA,8GAA8G,OAAO;AACrH,iFAAiF,iBAAiB;AAClG,yDAAyD,gBAAgB,QAAQ;AACjF,+CAA+C,gBAAgB,gBAAgB;AAC/E;AACA,kCAAkC;AAClC;AACA;AACA,UAAU,YAAY,aAAa,SAAS,UAAU;AACtD,oCAAoC,SAAS;AAC7C;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,kBAAkB,GAAG,kBAAkB;AACvC,cAAc,mBAAO,CAAC,GAAU;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gFAAgF;AAChF;AACA;AACA;AACA;AACA;AACA,0FAA0F,oBAAoB,mBAAO,CAAC,GAAkD,KAAK;AAC7K;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB,iBAAiB,IAAI;AACrB,SAAS;AACT,KAAK;AACL;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA,4JAA4J,QAAQ;AACpK;AACA;AACA;AACA;;;;;;;UCpHA;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;;;;WCtBA;WACA;WACA;WACA;WACA;WACA,iCAAiC,WAAW;WAC5C;WACA;;;;;WCPA;WACA;WACA;WACA;WACA,yCAAyC,wCAAwC;WACjF;WACA;WACA;;;;;WCPA;;;;;WCAA;WACA;WACA;WACA,uDAAuD,iBAAiB;WACxE;WACA,gDAAgD,aAAa;WAC7D;;;;;UENA;UACA;UACA;UACA","sources":["webpack://nrBrowserCore/webpack/universalModuleDefinition","webpack://nrBrowserCore/../../modules/common/browser-version/ie-version.js","webpack://nrBrowserCore/../../modules/common/config/config.js","webpack://nrBrowserCore/../../modules/common/constants/environment-variables.js","webpack://nrBrowserCore/../../modules/common/event-emitter/contextual-ee.js","webpack://nrBrowserCore/../../modules/common/event-emitter/handle.js","webpack://nrBrowserCore/../../modules/common/event-listener/event-listener-opts.js","webpack://nrBrowserCore/../../modules/common/timing/performance-check.js","webpack://nrBrowserCore/../../modules/common/timing/now.js","webpack://nrBrowserCore/../../modules/common/util/get-or-set.js","webpack://nrBrowserCore/../../modules/common/util/map-own.js","webpack://nrBrowserCore/../../modules/common/window/nreum.js","webpack://nrBrowserCore/../../modules/features/js-errors/aggregate/canonical-function-name.js","webpack://nrBrowserCore/../../modules/common/util/reduce.js","webpack://nrBrowserCore/../../modules/features/js-errors/aggregate/format-stack-trace.js","webpack://nrBrowserCore/../../modules/features/js-errors/aggregate/compute-stack-trace.js","webpack://nrBrowserCore/../../modules/features/js-errors/aggregate/string-hash-code.js","webpack://nrBrowserCore/../../modules/common/aggregate/aggregator.js","webpack://nrBrowserCore/../../modules/common/event-emitter/register-handler.js","webpack://nrBrowserCore/../../modules/common/util/stringify.js","webpack://nrBrowserCore/../../modules/common/url/encode.js","webpack://nrBrowserCore/../../modules/common/util/submit-data.js","webpack://nrBrowserCore/../../modules/common/url/location.js","webpack://nrBrowserCore/../../modules/common/url/clean-url.js","webpack://nrBrowserCore/../../modules/common/harvest/harvest.js","webpack://nrBrowserCore/../../modules/common/harvest/harvest-scheduler.js","webpack://nrBrowserCore/../../modules/features/js-errors/aggregate/index.js","webpack://nrBrowserCore/../../modules/common/wrap/wrap-fetch.js","webpack://nrBrowserCore/../../modules/common/wrap/wrap-function.js","webpack://nrBrowserCore/../../modules/common/wrap/wrap-timer.js","webpack://nrBrowserCore/../../modules/common/wrap/wrap-raf.js","webpack://nrBrowserCore/../../modules/common/wrap/wrap-history.js","webpack://nrBrowserCore/../../modules/common/wrap/wrap-jsonp.js","webpack://nrBrowserCore/../../modules/common/wrap/wrap-mutation.js","webpack://nrBrowserCore/../../modules/common/wrap/wrap-promise.js","webpack://nrBrowserCore/../../modules/common/wrap/wrap-events.js","webpack://nrBrowserCore/../../modules/common/wrap/wrap-xhr.js","webpack://nrBrowserCore/../../modules/common/wrap/index.js","webpack://nrBrowserCore/../../modules/features/js-errors/instrument/debug.js","webpack://nrBrowserCore/../../modules/features/js-errors/instrument/index.js","webpack://nrBrowserCore/../../node_modules/lodash._slice/index.js","webpack://nrBrowserCore/./dist/index.js","webpack://nrBrowserCore/./dist/types.js","webpack://nrBrowserCore/./dist/utils/api-defaults.js","webpack://nrBrowserCore/webpack/bootstrap","webpack://nrBrowserCore/webpack/runtime/compat get default export","webpack://nrBrowserCore/webpack/runtime/define property getters","webpack://nrBrowserCore/webpack/runtime/hasOwnProperty shorthand","webpack://nrBrowserCore/webpack/runtime/make namespace object","webpack://nrBrowserCore/webpack/before-startup","webpack://nrBrowserCore/webpack/startup","webpack://nrBrowserCore/webpack/after-startup"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"nrBrowserCore\"] = factory();\n\telse\n\t\troot[\"nrBrowserCore\"] = factory();\n})(self, function() {\nreturn ","/*\n * Copyright 2020 New Relic Corporation. All rights reserved.\n * SPDX-License-Identifier: Apache-2.0\n */\n\nvar div = document.createElement('div')\n\ndiv.innerHTML = '<!--[if lte IE 6]><div></div><![endif]-->' +\n  '<!--[if lte IE 7]><div></div><![endif]-->' +\n  '<!--[if lte IE 8]><div></div><![endif]-->' +\n  '<!--[if lte IE 9]><div></div><![endif]-->'\n\nvar len = div.getElementsByTagName('div').length\n\nexport var ieVersion\nif (len === 4) ieVersion = 6\nelse if (len === 3) ieVersion = 7\nelse if (len === 2) ieVersion = 8\nelse if (len === 1) ieVersion = 9\nelse ieVersion = 0\n","/*\n * Copyright 2020 New Relic Corporation. All rights reserved.\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { gosNREUMOriginals, defaults as nrDefaults} from \"../window/nreum\"\nimport { ieVersion } from \"../browser-version/ie-version\"\n\nvar originalMethods = gosNREUMOriginals().o\n\nvar runtimeConfiguration = {\n  origin: '' + window.location,\n  maxBytes: ieVersion === 6 ? 2000 : 30000\n}\n\nvar info = {beacon: nrDefaults.beacon, errorBeacon: nrDefaults.errorBeacon}\nvar init = {}\nvar loader_config = {}\n\nexport { runtimeConfiguration as runtime }\n\nexport { originalMethods as originals }\n\nexport function getConfiguration() {\n  return init\n}\n\nexport function setConfiguration(configuration) {\n  init = configuration\n}\n\nexport function getConfigurationValue(path) {\n  var val = init\n  var parts = path.split('.')\n  for (var i = 0; i < parts.length - 1; i++) {\n    val = val[parts[i]]\n    if (typeof val !== 'object') return\n  }\n  val = val[parts[parts.length - 1]]\n  console.log(\"val...(\",path,\")\", val)\n  return val\n}\n\nexport function setConfigurationValue(path, newValue) {\n  var val = init\n  var parts = path.split('.')\n  for (var i = 0; i < parts.length - 1; i++) {\n    if (typeof val[parts[i]] === 'undefined') {\n      val[parts[i]] = {}\n    }\n    val = val[parts[i]]\n  }\n  val[parts[parts.length - 1]] = newValue\n}\n\nexport function getInfo() {\n  // if (window.NREUM && window.NREUM.info) {\n  //   return window.NREUM.info\n  // }\n  // return {}\n  return info\n}\n\nexport function setInfo(obj) {\n  // no longer global\n  // window.NREUM = window.NREUM || {}\n  // window.NREUM.info = info = window.NREUM.info || {}\n\n  if (obj.licenseKey) {\n    info.licenseKey = obj.licenseKey\n  }\n\n  if (obj.beaconUrl) {\n    info.beacon = obj.beaconUrl\n    info.errorBeacon = obj.beaconUrl\n  }\n\n  if (obj.beacon) {\n    info.beacon = obj.beacon\n  }\n\n  if (obj.errorBeacon) {\n    info.errorBeacon = obj.errorBeacon\n  }\n\n  if (obj.appId) {\n    info.applicationID = obj.appId\n  }\n\n  if (obj.applicationID) {\n    info.applicationID = obj.applicationID\n  }\n\n  // TODO: there are others\n}\n\nexport function getLoaderConfig() {\n  // if (window.NREUM && window.NREUM.info) {\n  //   return window.NREUM.info\n  // }\n  // return {}\n  return loader_config\n}\n\nexport function setLoaderConfig(obj) {\n  loader_config = obj\n\n  // TODO: clean up\n}","export const PATH = !!process && process.env.PATH || ''\nexport const VERSION = !!process && process.env.VERSION ? `-${process.env.VERSION}`: ''\n","/*\n * Copyright 2020 New Relic Corporation. All rights reserved.\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { gosNREUM } from '../window/nreum'\nimport { getOrSet } from '../util/get-or-set'\nimport { mapOwn } from '../util/map-own'\n\nvar ctxId = 'nr@context'\n\n// create global emitter instance that can be shared among bundles\nlet nr = gosNREUM()\nvar globalInstance\nif (nr.ee) {\n  globalInstance = nr.ee\n} else {\n  globalInstance = ee(undefined, 'globalEE')\n  nr.ee = globalInstance\n}\n\n// export default ee()\nvar baseEE = ee(undefined, 'baseEE')\n\nexport { baseEE as ee }\n\nexport { globalInstance as global }\n\nfunction EventContext () {}\n\nfunction ee (old, debugId) {\n  console.log(\"ee! old, debug\", old, debugId)\n  var handlers = {}\n  var bufferGroupMap = {}\n  var emitters = {}\n\n  var emitter = {\n    on: addEventListener,\n    addEventListener: addEventListener,\n    removeEventListener: removeEventListener,\n    emit: emit,\n    get: getOrCreate,\n    listeners: listeners,\n    context: context,\n    buffer: bufferEventsByGroup,\n    abort: abortIfNotLoaded,\n    aborted: false,\n    isBuffering: isBuffering,\n    debugId\n  }\n\n  // buffer is associated with a base emitter, since there are two\n  // (global and scoped to the current bundle), it is now part of the emitter\n  if (!old) {\n    emitter.backlog = {}\n  }\n\n  return emitter\n\n  function context (contextOrStore) {\n    if (contextOrStore && contextOrStore instanceof EventContext) {\n      return contextOrStore\n    } else if (contextOrStore) {\n      return getOrSet(contextOrStore, ctxId, getNewContext)\n    } else {\n      return getNewContext()\n    }\n  }\n\n  function emit (type, args, contextOrStore, force, bubble) {\n    console.log(\"emit...\", type, args, contextOrStore, force, bubble)\n    if (bubble !== false) bubble = true\n    if (baseEE.aborted && !force) { return }\n    if (old && bubble) old.emit(type, args, contextOrStore)\n    // console.log(\"continue...\")\n\n    var ctx = context(contextOrStore)\n    var handlersArray = listeners(type)\n    var len = handlersArray.length\n\n    // Extremely verbose debug logging\n    // if ([/^xhr/].map(function (match) {return type.match(match)}).filter(Boolean).length) {\n    //  console.log(type + ' args:')\n    //  console.log(args)\n    //  console.log(type + ' handlers array:')\n    //  console.log(handlersArray)\n    //  console.log(type + ' context:')\n    //  console.log(ctx)\n    //  console.log(type + ' ctxStore:')\n    //  console.log(ctxStore)\n    // }\n\n    // Apply each handler function in the order they were added\n    // to the context with the arguments\n\n    console.log(\"handlersArray...\", handlersArray)\n    for (var i = 0; i < len; i++) handlersArray[i].apply(ctx, args)\n\n    // console.log(bufferGroupMap[type])\n    // Buffer after emitting for consistent ordering\n    var bufferGroup = getBuffer()[bufferGroupMap[type]]\n    if (bufferGroup) {\n      bufferGroup.push([emitter, type, args, ctx])\n    }\n\n    // console.log(bufferGroup)\n\n    // Return the context so that the module that emitted can see what was done.\n    return ctx\n  }\n\n  function addEventListener (type, fn) {\n    // Retrieve type from handlers, if it doesn't exist assign the default and retrieve it.\n    handlers[type] = listeners(type).concat(fn)\n  }\n\n  function removeEventListener (type, fn) {\n    var listeners = handlers[type]\n    if (!listeners) return\n    for (var i = 0; i < listeners.length; i++) {\n      if (listeners[i] === fn) {\n        listeners.splice(i, 1)\n      }\n    }\n  }\n\n  function listeners (type) {\n    return handlers[type] || []\n  }\n\n  function getOrCreate (name) {\n    console.log(\"get or create emitter - \", name)\n    return (emitters[name] = emitters[name] || ee(emitter, name))\n  }\n\n  function bufferEventsByGroup (types, group) {\n    var eventBuffer = getBuffer()\n\n    // do not buffer events if agent has been aborted\n    if (emitter.aborted) return\n    mapOwn(types, function (i, type) {\n      group = group || 'feature'\n      bufferGroupMap[type] = group\n      if (!(group in eventBuffer)) {\n        eventBuffer[group] = []\n      }\n    })\n  }\n\n  function isBuffering(type) {\n    var bufferGroup = getBuffer()[bufferGroupMap[type]]\n    return !!bufferGroup\n  }\n\n  // buffer is associated with a base emitter, since there are two\n  // (global and scoped to the current bundle), it is now part of the emitter\n  function getBuffer() {\n    if (old) {\n      return old.backlog\n    }\n    return emitter.backlog\n  }\n}\n\n// get context object from store object, or create if does not exist\nexport function getOrSetContext(obj) {\n  return getOrSet(obj, ctxId, getNewContext)\n}\n\nfunction getNewContext () {\n  return new EventContext()\n}\n\n// abort should be called 30 seconds after the page has started running\n// We should drop our data and stop collecting if we still have a backlog, which\n// signifies the rest of the agent wasn't loaded\nfunction abortIfNotLoaded () {\n  console.log('aborted!')\n  if (baseEE.backlog.api || baseEE.backlog.feature) {\n    baseEE.aborted = true\n    baseEE.backlog = {}\n  }\n}\n","/*\n * Copyright 2020 New Relic Corporation. All rights reserved.\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { ee as eePkg, global } from './contextual-ee'\nexport var handleEE = eePkg.get('handle')\nexport var globalEE = global.get('handle')\n\n// Exported for register-handler to attach to.\n// export default handle\nexport { globalHandle as global }\n\nexport function handle (type, args, ctx, group) {\n  console.log(\"handle\", type, args, ctx, group)\n  handleEE.buffer([type], group)\n  handleEE.emit(type, args, ctx)\n}\n\nfunction globalHandle(type, args, ctx, group) {\n  globalEE.buffer([type], group)\n  globalEE.emit(type, args, ctx)\n}\n","var supportsPassive = false\ntry {\n  var opts = Object.defineProperty({}, 'passive', {\n    get: function() {\n      supportsPassive = true\n    }\n  })\n  window.addEventListener('testPassive', null, opts)\n  window.removeEventListener('testPassive', null, opts)\n} catch (e) {}\n\nexport function eventListenerOpts(useCapture) {\n  return supportsPassive ? {passive: true, capture: !!useCapture} : !!useCapture\n}\n\n// export default eventListenerOpts\n","/*\n * Copyright 2020 New Relic Corporation. All rights reserved.\n * SPDX-License-Identifier: Apache-2.0\n */\nexport const exists = typeof (window.performance) !== 'undefined' && window.performance.timing && typeof (window.performance.timing.navigationStart) !== 'undefined'\n// export default {\n//   exists\n// }\n","/*\n * Copyright 2020 New Relic Corporation. All rights reserved.\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport {exists} from './performance-check'\n\nvar lastTimestamp = new Date().getTime()\nvar offset = lastTimestamp\n\n// export default now\n\nexport function now () {\n  if (exists && performance.now) {\n    return Math.round(performance.now())\n  }\n  // ensure a new timestamp is never smaller than a previous timestamp\n  return (lastTimestamp = Math.max(new Date().getTime(), lastTimestamp)) - offset\n}\n\nexport function getLastTimestamp() {\n  return lastTimestamp\n}\n\nexport function setOffset (val){\n  offset = val\n}\n\nexport function getOffset (){\n  return offset\n}\n","/*\n * Copyright 2020 New Relic Corporation. All rights reserved.\n * SPDX-License-Identifier: Apache-2.0\n */\n\nvar has = Object.prototype.hasOwnProperty\n\n// export default getOrSet\n\n// Always returns the current value of obj[prop], even if it has to set it first\nexport function getOrSet (obj, prop, getVal) {\n  // If the value exists return it.\n  if (has.call(obj, prop)) return obj[prop]\n\n  var val = getVal()\n\n  // Attempt to set the property so it's not enumerable\n  if (Object.defineProperty && Object.keys) {\n    try {\n      Object.defineProperty(obj, prop, {\n        value: val, // old IE inherits non-write-ability\n        writable: true,\n        enumerable: false\n      })\n\n      return val\n    } catch (e) {\n      // Can't report internal errors,\n      // because GOS is a dependency of the reporting mechanisms\n    }\n  }\n\n  // fall back to setting normally\n  obj[prop] = val\n  return val\n}\n","/*\n * Copyright 2020 New Relic Corporation. All rights reserved.\n * SPDX-License-Identifier: Apache-2.0\n */\n\nvar has = Object.prototype.hasOwnProperty\n\n// export default mapOwn\n\nexport function mapOwn (obj, fn) {\n  var results = []\n  var key = ''\n  var i = 0\n\n  for (key in obj) {\n    if (has.call(obj, key)) {\n      results[i] = fn(key, obj[key])\n      i += 1\n    }\n  }\n\n  return results\n}\n","\nimport * as env from '../constants/environment-variables'\n\nexport const defaults = {\n  agent:  `js-agent.newrelic.com/${env.PATH}nr${env.VERSION}.min.js`,\n  beacon: 'bam.nr-data.net',\n  errorBeacon: 'bam.nr-data.net',\n  version: env.VERSION\n}\n\nexport function gosNREUM(){\n  if (!window.NREUM) {\n    window.NREUM = {}\n  }\n  if (typeof (window.newrelic) === 'undefined') window.newrelic = window.NREUM\n  return window.NREUM\n}\n\nexport function gosNREUMInfo(){\n  let nr = gosNREUM()\n  const externallySupplied = nr.info || {}\n  \n  nr.info = {\n    beacon: defaults.beacon,\n    errorBeacon: defaults.errorBeacon,\n    agent:  defaults.agent,\n    ...externallySupplied\n  }\n  \n  return nr\n}\n\nexport function gosNREUMLoaderConfig(){\n  let nr = gosNREUM()\n  const externallySupplied = nr.loader_config || {}\n  \n  nr.loader_config = {\n    ...externallySupplied\n  }\n  \n  return nr\n}\n\nexport function gosNREUMInit(){\n  let nr = gosNREUM()\n  const externallySupplied = nr.init || {}\n  \n  nr.init = {\n    ...externallySupplied\n  }\n  \n  return nr\n}\n\n\nexport function gosNREUMOriginals() {\n  let nr = gosNREUM()\n  if (!nr.o) {\n    var win = window\n    // var doc = win.document\n    var XHR = win.XMLHttpRequest\n\n    nr.o = {\n      ST: setTimeout,\n      SI: win.setImmediate,\n      CT: clearTimeout,\n      XHR: XHR,\n      REQ: win.Request,\n      EV: win.Event,\n      PR: win.Promise,\n      MO: win.MutationObserver,\n      FETCH: win.fetch\n    }\n  }\n  return nr\n}\n\nexport function addFnToNREUM(fnName, fn){\n  let nr = gosNREUM()\n  nr[fnName] = fn\n}\n\nexport function gosCDN() {\n  console.log(\"set up NREUM for the CDN!\")\n  gosNREUMInfo()\n  gosNREUMInit()\n  gosNREUMOriginals()\n  gosNREUMLoaderConfig()\n  return gosNREUM()\n}\n","/*\n * Copyright 2020 New Relic Corporation. All rights reserved.\n * SPDX-License-Identifier: Apache-2.0\n */\n\nvar canonicalFunctionNameRe = /([a-z0-9]+)$/i\nexport function canonicalFunctionName (orig) {\n  if (!orig) return\n\n  var match = orig.match(canonicalFunctionNameRe)\n  if (match) return match[1]\n\n  return\n}\n\n// export default canonicalFunctionName\n// module.exports = canonicalFunctionName\n","/*\n * Copyright 2020 New Relic Corporation. All rights reserved.\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport function reduce (arr, fn, next) {\n  var i = 0\n  if (typeof next === 'undefined') {\n    next = arr[0]\n    i = 1\n  }\n\n  for (i; i < arr.length; i++) {\n    next = fn(next, arr[i])\n  }\n\n  return next\n}\n","/*\n * Copyright 2020 New Relic Corporation. All rights reserved.\n * SPDX-License-Identifier: Apache-2.0\n */\n\nvar stripNewlinesRegex = /^\\n+|\\n+$/g\nvar MAX_STACK_TRACE_LENGTH = 65530\n\nexport function formatStackTrace(stackLines) {\n  return truncateStackLines(stackLines).replace(stripNewlinesRegex, '')\n}\n\n// module.exports.truncateSize = truncateSize\n\n// takes array of stack lines and returns string with top 50 and buttom 50 lines\nfunction truncateStackLines(stackLines) {\n  var stackString\n  if (stackLines.length > 100) {\n    var truncatedLines = stackLines.length - 100\n    stackString = stackLines.slice(0, 50).join('\\n')\n    stackString += '\\n< ...truncated ' + truncatedLines + ' lines... >\\n'\n    stackString += stackLines.slice(-50).join('\\n')\n  } else {\n    stackString = stackLines.join('\\n')\n  }\n  return stackString\n}\n\n// truncates stack string to limit what is sent to backend\nexport function truncateSize(stackString) {\n  return (stackString.length > MAX_STACK_TRACE_LENGTH) ? stackString.substr(0, MAX_STACK_TRACE_LENGTH) : stackString\n}\n","/*\n * Copyright 2020 New Relic Corporation. All rights reserved.\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/* eslint-disable no-useless-escape */\n\n// computeStackTrace: cross-browser stack traces in JavaScript\n//\n// Syntax:\n//   s = computeStackTrace(exception) // consider using TraceKit.report instead\n// Returns:\n//   s.name              - exception name\n//   s.message           - exception message\n//   s.stack[i].url      - JavaScript or HTML file URL\n//   s.stack[i].func     - function name, or empty for anonymous functions\n//   s.stack[i].line     - line number, if known\n//   s.stack[i].column   - column number, if known\n//   s.stack[i].context  - an array of source code lines; the middle element corresponds to the correct line#\n//   s.mode              - 'stack', 'stacktrace', 'multiline', 'callers', 'onerror', or 'failed' -- method used to collect the stack trace\n//\n// Supports:\n//   - Firefox:  full stack trace with line numbers and unreliable column\n//               number on top frame\n//   - Chrome:   full stack trace with line and column numbers\n//   - Safari:   line and column number for the topmost stacktrace element\n//               only\n//   - IE:       no line numbers whatsoever\n\n// Contents of Exception in various browsers.\n//\n// SAFARI:\n// ex.message = Can't find variable: qq\n// ex.line = 59\n// ex.sourceId = 580238192\n// ex.sourceURL = http://...\n// ex.expressionBeginOffset = 96\n// ex.expressionCaretOffset = 98\n// ex.expressionEndOffset = 98\n// ex.name = ReferenceError\n//\n// FIREFOX:\n// ex.message = qq is not defined\n// ex.fileName = http://...\n// ex.lineNumber = 59\n// ex.stack = ...stack trace... (see the example below)\n// ex.name = ReferenceError\n//\n// CHROME:\n// ex.message = qq is not defined\n// ex.name = ReferenceError\n// ex.type = not_defined\n// ex.arguments = ['aa']\n// ex.stack = ...stack trace...\n//\n// INTERNET EXPLORER:\n// ex.message = ...\n// ex.name = ReferenceError\nimport { reduce } from '../../../common/util/reduce'\nimport {formatStackTrace} from './format-stack-trace'\n\nvar debug = false\n\nvar classNameRegex = /function (.+?)\\s*\\(/\nvar chrome = /^\\s*at (?:((?:\\[object object\\])?(?:[^(]*\\([^)]*\\))*[^()]*(?: \\[as \\S+\\])?) )?\\(?((?:file|http|https|chrome-extension):.*?)?:(\\d+)(?::(\\d+))?\\)?\\s*$/i\nvar gecko = /^\\s*(?:(\\S*|global code)(?:\\(.*?\\))?@)?((?:file|http|https|chrome|safari-extension).*?):(\\d+)(?::(\\d+))?\\s*$/i\nvar chrome_eval = /^\\s*at .+ \\(eval at \\S+ \\((?:(?:file|http|https):[^)]+)?\\)(?:, [^:]*:\\d+:\\d+)?\\)$/i\nvar ie_eval = /^\\s*at Function code \\(Function code:\\d+:\\d+\\)\\s*/i\n\n// export default computeStackTrace\n// module.exports = computeStackTrace\n\nexport function computeStackTrace (ex) {\n  var stack = null\n\n  try {\n    stack = computeStackTraceFromStackProp(ex)\n    if (stack) {\n      return stack\n    }\n  } catch (e) {\n    if (debug) {\n      throw e\n    }\n  }\n\n  try {\n    stack = computeStackTraceBySourceAndLine(ex)\n    if (stack) {\n      return stack\n    }\n  } catch (e) {\n    if (debug) {\n      throw e\n    }\n  }\n\n  try {\n    stack = computeStackTraceWithMessageOnly(ex)\n    if (stack) {\n      return stack\n    }\n  } catch (e) {\n    if (debug) {\n      throw e\n    }\n  }\n\n  return {\n    'mode': 'failed',\n    'stackString': '',\n    'frames': []\n  }\n}\n\n/**\n * Computes stack trace information from the stack property.\n * Chrome and Gecko use this property.\n * @param {Error} ex\n * @return {?Object.<string, *>} Stack trace information.\n */\nfunction computeStackTraceFromStackProp (ex) {\n  if (!ex.stack) {\n    return null\n  }\n\n  var errorInfo = reduce(\n    ex.stack.split('\\n'),\n    parseStackProp,\n    {frames: [], stackLines: [], wrapperSeen: false}\n  )\n\n  if (!errorInfo.frames.length) return null\n\n  return {\n    'mode': 'stack',\n    'name': ex.name || getClassName(ex),\n    'message': ex.message,\n    'stackString': formatStackTrace(errorInfo.stackLines),\n    'frames': errorInfo.frames\n  }\n}\n\nfunction parseStackProp (info, line) {\n  var element = getElement(line)\n\n  if (!element) {\n    info.stackLines.push(line)\n    return info\n  }\n\n  if (isWrapper(element.func)) info.wrapperSeen = true\n  else info.stackLines.push(line)\n\n  if (!info.wrapperSeen) info.frames.push(element)\n  return info\n}\n\nfunction getElement (line) {\n  var parts = line.match(gecko)\n  if (!parts) parts = line.match(chrome)\n\n  if (parts) {\n    return ({\n      'url': parts[2],\n      'func': (parts[1] !== 'Anonymous function' && parts[1] !== 'global code' && parts[1]) || null,\n      'line': +parts[3],\n      'column': parts[4] ? +parts[4] : null\n    })\n  }\n\n  if (line.match(chrome_eval) || line.match(ie_eval) || line === 'anonymous') {\n    return { 'func': 'evaluated code' }\n  }\n}\n\nfunction computeStackTraceBySourceAndLine (ex) {\n  if (!('line' in ex)) return null\n\n  var className = ex.name || getClassName(ex)\n\n  // Safari does not provide a URL for errors in eval'd code\n  if (!ex.sourceURL) {\n    return ({\n      'mode': 'sourceline',\n      'name': className,\n      'message': ex.message,\n      'stackString': getClassName(ex) + ': ' + ex.message + '\\n    in evaluated code',\n      'frames': [{\n        'func': 'evaluated code'\n      }]\n    })\n  }\n\n  var stackString = className + ': ' + ex.message + '\\n    at ' + ex.sourceURL\n  if (ex.line) {\n    stackString += ':' + ex.line\n    if (ex.column) {\n      stackString += ':' + ex.column\n    }\n  }\n\n  return ({\n    'mode': 'sourceline',\n    'name': className,\n    'message': ex.message,\n    'stackString': stackString,\n    'frames': [{ 'url': ex.sourceURL,\n      'line': ex.line,\n      'column': ex.column\n    }]\n  })\n}\n\nfunction computeStackTraceWithMessageOnly (ex) {\n  var className = ex.name || getClassName(ex)\n  if (!className) return null\n\n  return ({\n    'mode': 'nameonly',\n    'name': className,\n    'message': ex.message,\n    'stackString': className + ': ' + ex.message,\n    'frames': []\n  })\n}\n\nfunction getClassName (obj) {\n  var results = classNameRegex.exec(String(obj.constructor))\n  return (results && results.length > 1) ? results[1] : 'unknown'\n}\n\nfunction isWrapper (functionName) {\n  return (functionName && functionName.indexOf('nrWrapper') >= 0)\n}\n","/*\n * Copyright 2020 New Relic Corporation. All rights reserved.\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport function stringHashCode (string) {\n  var hash = 0\n  var charVal\n\n  if (!string || !string.length) return hash\n  for (var i = 0; i < string.length; i++) {\n    charVal = string.charCodeAt(i)\n    hash = ((hash << 5) - hash) + charVal\n    hash = hash | 0 // Convert to 32bit integer\n  }\n  return hash\n}\n\n// export default stringHashCode\n// module.exports = stringHashCode\n","/*\n * Copyright 2020 New Relic Corporation. All rights reserved.\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { mapOwn } from '../util/map-own'\n\nvar aggregatedData = {}\n\n// export default {\n//   store: storeEventMetrics,\n//   storeMetric: storeMetric,\n//   take: take,\n//   get: get,\n//   merge: mergeMetrics\n// }\n\nexport { storeEventMetrics as store }\nexport { mergeMetrics as merge }\n\n// Items with the same type and name get aggregated together\n// params are example data from the aggregated items\n// metrics are the numeric values to be aggregated\n\n// store a single metric not tied to an event, metric values are stored in a single `stats` object property\nexport function storeMetric (type, name, params, value) {\n  console.log(\"store metric not tied to an event\", type, name)\n  var bucket = getBucket(type, name, params)\n  bucket.stats = updateMetric(value, bucket.stats)\n  return bucket\n}\n\n// store multiple metrics tied to an event, metrics are stored in a `metrics` property (map of name-stats metrics)\nfunction storeEventMetrics (type, name, params, newMetrics, customParams) {\n  console.log(\"storeEventMetrics\", type, name)\n  var bucket = getBucket(type, name, params, customParams)\n  bucket.metrics = aggregateMetrics(newMetrics, bucket.metrics)\n  return bucket\n}\n\nfunction aggregateMetrics (newMetrics, oldMetrics) {\n  if (!oldMetrics) oldMetrics = {count: 0}\n  oldMetrics.count += 1\n  mapOwn(newMetrics, function (key, value) {\n    oldMetrics[key] = updateMetric(value, oldMetrics[key])\n  })\n  return oldMetrics\n}\n\nfunction updateMetric (value, metric) {\n  // when there is no value, then send only count\n  if (value == null) {\n    return updateCounterMetric(metric)\n  }\n\n  // When there is only one data point, the c (count), min, max, and sos (sum of squares) params are superfluous.\n  if (!metric) return {t: value}\n\n  // but on the second data point, we need to calculate the other values before aggregating in new values\n  if (!metric.c) {\n    metric = createMetricObject(metric.t)\n  }\n\n  // at this point, metric is always uncondensed\n  metric.c += 1\n  metric.t += value\n  metric.sos += value * value\n  if (value > metric.max) metric.max = value\n  if (value < metric.min) metric.min = value\n\n  return metric\n}\n\nfunction updateCounterMetric(metric) {\n  if (!metric) {\n    metric = {c: 1}\n  } else {\n    metric.c++\n  }\n  return metric\n}\n\n/**\n * Merge metrics object into existing metrics.\n *\n * @param {string} type\n * @param {string} name\n * @param {object} metrics - Metrics to merge.\n */\nfunction mergeMetrics (type, name, metrics, params, customParams) {\n  var bucket = getBucket(type, name, params, customParams)\n\n  if (!bucket.metrics) {\n    bucket.metrics = metrics\n    return\n  }\n\n  var oldMetrics = bucket.metrics\n  oldMetrics.count += metrics.count\n\n  // iterate through each new metric and merge\n  mapOwn(metrics, function (key, value) {\n    // count is a special case handled above\n    if (key === 'count') return\n\n    var oldMetric = oldMetrics[key]\n    var newMetric = metrics[key]\n\n    // handling the case where newMetric is a single-value first\n    if (newMetric && !newMetric.c) {\n      oldMetrics[key] = updateMetric(newMetric.t, oldMetric)\n    } else { // newMetric is a metric object\n      oldMetrics[key] = mergeMetric(newMetric, oldMetrics[key])\n    }\n  })\n}\n\nfunction mergeMetric(newMetric, oldMetric) {\n  if (!oldMetric) return newMetric\n\n  if (!oldMetric.c) {\n    // oldMetric is a single-value\n    oldMetric = createMetricObject(oldMetric.t)\n  }\n\n  oldMetric.min = Math.min(newMetric.min, oldMetric.min)\n  oldMetric.max = Math.max(newMetric.max, oldMetric.max)\n  oldMetric.t += newMetric.t\n  oldMetric.sos += newMetric.sos\n  oldMetric.c += newMetric.c\n\n  return oldMetric\n}\n\n// take a value and create a metric object\nfunction createMetricObject (value) {\n  return {\n    t: value,\n    min: value,\n    max: value,\n    sos: value * value,\n    c: 1\n  }\n}\n\nfunction getBucket (type, name, params, customParams) {\n  if (!aggregatedData[type]) aggregatedData[type] = {}\n  var bucket = aggregatedData[type][name]\n  if (!bucket) {\n    bucket = aggregatedData[type][name] = { params: params || {} }\n    if (customParams) {\n      bucket.custom = customParams\n    }\n  }\n  return bucket\n}\n\nexport function get (type, name) {\n  // if name is passed, get a single bucket\n  if (name) return aggregatedData[type] && aggregatedData[type][name]\n  // else, get all buckets of that type\n  return aggregatedData[type]\n}\n\n// Like get, but for many types and it deletes the retrieved content from the aggregatedData\nexport function take (types) {\n  var results = {}\n  var type = ''\n  var hasData = false\n  for (var i = 0; i < types.length; i++) {\n    type = types[i]\n    results[type] = toArray(aggregatedData[type])\n    if (results[type].length) hasData = true\n    delete aggregatedData[type]\n  }\n  return hasData ? results : null\n}\n\nfunction toArray (obj) {\n  if (typeof obj !== 'object') return []\n\n  return mapOwn(obj, getValue)\n}\n\nfunction getValue (key, value) {\n  return value\n}\n","/*\n * Copyright 2020 New Relic Corporation. All rights reserved.\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { handleEE, globalEE } from './handle'\n\n// export default defaultRegister\nexport { globalRegister as global }\nexport { defaultRegister as registerHandler }\n\ndefaultRegister.on = registerWithSpecificEmitter\n\nvar handlers = defaultRegister.handlers = {}\nvar globalHandlers = globalRegister.handlers = {}\n\nexport function defaultRegister (type, handler, group, ee) {\n  console.log(\"register...\", type)\n  registerWithSpecificEmitter(ee || handleEE, handlers, type, handler, group)\n}\n\nfunction globalRegister (type, handler, group) {\n  registerWithSpecificEmitter(globalEE, globalHandlers, type, handler, group)\n}\n\nfunction registerWithSpecificEmitter (ee, handlers, type, handler, group) {\n  if (!group) group = 'feature'\n  if (!ee) ee = handleEE\n\n  console.log('type', type, 'should sub to ee', ee.debugId)\n\n  if (ee.isBuffering(type)) {\n    var groupHandlers = handlers[group] = handlers[group] || {}\n    var list = groupHandlers[type] = groupHandlers[type] || []\n    list.push([ee, handler])\n  } else {\n    ee.on(type, handler)\n  }\n}\n","/*\n * Copyright 2020 New Relic Corporation. All rights reserved.\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport {mapOwn} from './map-own'\nimport {ee} from '../event-emitter/contextual-ee'\n\nvar escapable = /[\\\\\\\"\\x00-\\x1f\\x7f-\\x9f\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]/g // eslint-disable-line\nvar meta = {\n  '\\b': '\\\\b',\n  '\\t': '\\\\t',\n  '\\n': '\\\\n',\n  '\\f': '\\\\f',\n  '\\r': '\\\\r',\n  '\"': '\\\\\"',\n  '\\\\': '\\\\\\\\'\n}\n\n// export default stringify\n\nexport function stringify (val) {\n  try {\n    return str('', {'': val})\n  } catch (e) {\n    try {\n      ee.emit('internal-error', [e])\n    } catch (err) {\n    }\n  }\n}\n\nfunction quote (string) {\n  escapable.lastIndex = 0\n  return escapable.test(string) ? '\"' + string.replace(escapable, function (a) {\n    var c = meta[a]\n    return typeof c === 'string' ? c : '\\\\u' + ('0000' + a.charCodeAt(0).toString(16)).slice(-4)\n  }) + '\"' : '\"' + string + '\"'\n}\n\nfunction str (key, holder) {\n  var value = holder[key]\n\n  switch (typeof value) {\n    case 'string':\n      return quote(value)\n    case 'number':\n      return isFinite(value) ? String(value) : 'null'\n    case 'boolean':\n      return String(value)\n    case 'object':\n      if (!value) { return 'null' }\n      var partial = []\n\n      // The value is an array. Stringify every element. Use null as a placeholder\n      // for non-JSON values.\n      if (value instanceof window.Array || Object.prototype.toString.apply(value) === '[object Array]') {\n        var length = value.length\n        for (var i = 0; i < length; i += 1) {\n          partial[i] = str(i, value) || 'null'\n        }\n\n        return partial.length === 0 ? '[]' : '[' + partial.join(',') + ']'\n      }\n\n      mapOwn(value, function (k) {\n        var v = str(k, value)\n        if (v) partial.push(quote(k) + ':' + v)\n      })\n\n      return partial.length === 0 ? '{}' : '{' + partial.join(',') + '}'\n  }\n}\n","/*\n * Copyright 2020 New Relic Corporation. All rights reserved.\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport {mapOwn} from '../util/map-own'\nimport {stringify} from '../util/stringify'\n\n// Characters that are safe in a qs, but get encoded.\nvar charMap = {\n  '%2C': ',',\n  '%3A': ':',\n  '%2F': '/',\n  '%40': '@',\n  '%24': '$',\n  '%3B': ';'\n}\n\nvar charList = mapOwn(charMap, function (k) { return k })\nvar safeEncoded = new RegExp(charList.join('|'), 'g')\n\nfunction real (c) {\n  return charMap[c]\n}\n\n// Encode as URI Component, then unescape anything that is ok in the\n// query string position.\nexport function qs (value) {\n  if (value === null || value === undefined) return 'null'\n  return encodeURIComponent(value).replace(safeEncoded, real)\n}\n\n// export default {obj: obj, fromArray: fromArray, qs: qs, param: param}\n\nexport function fromArray (qs, maxBytes) {\n  var bytes = 0\n  for (var i = 0; i < qs.length; i++) {\n    bytes += qs[i].length\n    if (bytes > maxBytes) return qs.slice(0, i).join('')\n  }\n  return qs.join('')\n}\n\nexport function obj (payload, maxBytes) {\n  var total = 0\n  var result = ''\n\n  mapOwn(payload, function (feature, dataArray) {\n    var intermediate = []\n    var next\n    var i\n\n    if (typeof dataArray === 'string') {\n      next = '&' + feature + '=' + qs(dataArray)\n      total += next.length\n      result += next\n    } else if (dataArray.length) {\n      total += 9\n      for (i = 0; i < dataArray.length; i++) {\n        next = qs(stringify(dataArray[i]))\n        total += next.length\n        if (typeof maxBytes !== 'undefined' && total >= maxBytes) break\n        intermediate.push(next)\n      }\n      result += '&' + feature + '=%5B' + intermediate.join(',') + '%5D'\n    }\n  })\n  return result\n}\n\n// Constructs an HTTP parameter to add to the BAM router URL\nexport function param (name, value) {\n  if (value && typeof (value) === 'string') {\n    return '&' + name + '=' + qs(value)\n  }\n  return ''\n}\n","/*\n * Copyright 2020 New Relic Corporation. All rights reserved.\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport const submitData = {}\n// export default submitData\n\nsubmitData.jsonp = function jsonp (url, jsonp) {\n  var element = document.createElement('script')\n  element.type = 'text/javascript'\n  element.src = url + '&jsonp=' + jsonp\n  var firstScript = document.getElementsByTagName('script')[0]\n  firstScript.parentNode.insertBefore(element, firstScript)\n  return element\n}\n\nsubmitData.xhr = function xhr (url, body, sync) {\n  var request = new XMLHttpRequest()\n\n  request.open('POST', url, !sync)\n  try {\n    // Set cookie\n    if ('withCredentials' in request) request.withCredentials = true\n  } catch (e) {}\n\n  request.setRequestHeader('content-type', 'text/plain')\n  request.send(body)\n  return request\n}\n\nsubmitData.xhrSync = function xhrSync (url, body) {\n  return submitData.xhr(url, body, true)\n}\n\nsubmitData.img = function img (url) {\n  var element = new Image()\n  element.src = url\n  return element\n}\n\nsubmitData.beacon = function (url, body) {\n  return navigator.sendBeacon(url, body)\n}\n","/*\n * Copyright 2020 New Relic Corporation. All rights reserved.\n * SPDX-License-Identifier: Apache-2.0\n */\n\n// export default {\n//   getLocation: getLocation\n// }\n\nexport function getLocation() {\n  return '' + location\n}\n","/*\n * Copyright 2020 New Relic Corporation. All rights reserved.\n * SPDX-License-Identifier: Apache-2.0\n */\n\nvar withHash = /([^?#]*)[^#]*(#[^?]*|$).*/\nvar withoutHash = /([^?#]*)().*/\nexport function cleanURL (url, keepHash) {\n  return url.replace(keepHash ? withHash : withoutHash, '$1$2')\n}\n\n// export default cleanURL\n","/*\n * Copyright 2020 New Relic Corporation. All rights reserved.\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { mapOwn } from '../util/map-own'\nimport {obj as encodeObj, param as encodeParam} from '../url/encode'\nimport {stringify} from '../util/stringify'\nimport {submitData} from '../util/submit-data'\nimport {reduce} from '../util/reduce'\nimport {getLocation} from '../url/location'\nimport * as config from '../config/config'\nimport {cleanURL} from '../url/clean-url'\nimport {now} from '../timing/now'\nimport {eventListenerOpts} from '../event-listener/event-listener-opts'\nimport {ieVersion} from '../browser-version/ie-version'\nimport {VERSION as NR_VERSION} from '../constants/environment-variables'\n\nconst version = NR_VERSION\n// var version = '<VERSION>'\n// var jsonp = 'NREUM.setToken'\nvar _events = {}\nvar haveSendBeacon = !!navigator.sendBeacon\nvar tooManyRequestsDelay = config.getConfigurationValue('harvest.tooManyRequestsDelay') || 60\nvar getScheme = () => (config.getConfigurationValue('ssl') === false) ? 'http' : 'https'\n\n// requiring ie version updates the IE version on the loader object\n// var ieVersion = require('./ie-version')\nexport var xhrUsable = ieVersion > 9 || ieVersion === 0\n\n// export default {\n//   sendFinal: sendAllFromUnload,\n//   sendX: sendX,\n//   send: send,\n//   on: on,\n//   xhrUsable: xhrUsable,\n//   resetListeners: resetListeners,\n//   getSubmitMethod: getSubmitMethod\n// }\n\nexport { sendAllFromUnload as sendFinal }\n\nfunction sendAllFromUnload () {\n  var sents = mapOwn(_events, function (endpoint) {\n    return sendX(endpoint, { unload: true })\n  })\n  return reduce(sents, or)\n}\n\nfunction or (a, b) { return a || b }\n\nfunction createPayload (type, options) {\n  var makeBody = createAccumulator()\n  var makeQueryString = createAccumulator()\n  var listeners = (_events[type] && _events[type] || [])\n\n  for (var i = 0; i < listeners.length; i++) {\n    var singlePayload = listeners[i](options)\n    if (!singlePayload) continue\n    if (singlePayload.body) mapOwn(singlePayload.body, makeBody)\n    if (singlePayload.qs) mapOwn(singlePayload.qs, makeQueryString)\n  }\n  return { body: makeBody(), qs: makeQueryString() }\n}\n\n/**\n * Initiate a harvest from multiple sources. An event that corresponds to the endpoint\n * name is emitted, which gives any listeners the opportunity to provide payload data.\n *\n * @param {string} endpoint - The endpoint of the harvest (jserrors, events, resources etc.)\n * @param {object} nr - The loader singleton.\n *\n * @param {object} opts\n * @param {bool} opts.needResponse - Specify whether the caller expects a response data.\n * @param {bool} opts.unload - Specify whether the call is a final harvest during page unload.\n */\nexport function sendX (endpoint, opts, cbFinished) {\n  var submitMethod = getSubmitMethod(endpoint, opts)\n  // console.log('submit method', submitMethod)\n  if (!submitMethod) return false\n  var options = {\n    retry: submitMethod.method === submitData.xhr\n  }\n  // console.log('_send!', endpoint, opts, options)\n  return _send(endpoint, createPayload(endpoint, options), opts, submitMethod, cbFinished)\n}\n\n/**\n * Initiate a harvest call.\n *\n * @param {string} endpoint - The endpoint of the harvest (jserrors, events, resources etc.)\n * @param {object} nr - The loader singleton.\n *\n * @param {object} singlePayload - Object representing payload.\n * @param {object} singlePayload.qs - Map of values that should be sent as part of the request query string.\n * @param {string} singlePayload.body - String that should be sent as the body of the request.\n * @param {string} singlePayload.body.e - Special case of body used for browser interactions.\n *\n * @param {object} opts\n * @param {bool} opts.needResponse - Specify whether the caller expects a response data.\n * @param {bool} opts.unload - Specify whether the call is a final harvest during page unload.\n */\nexport function send (endpoint, singlePayload, opts, submitMethod, cbFinished) {\n  var makeBody = createAccumulator()\n  var makeQueryString = createAccumulator()\n  if (singlePayload.body) mapOwn(singlePayload.body, makeBody)\n  if (singlePayload.qs) mapOwn(singlePayload.qs, makeQueryString)\n\n  var payload = { body: makeBody(), qs: makeQueryString() }\n  return _send(endpoint, payload, opts, submitMethod, cbFinished)\n}\n\nfunction _send (endpoint, payload, opts, submitMethod, cbFinished) {\n  var info = config.getInfo()\n  // console.log('info in send!', info)\n  if (!info.errorBeacon) return false\n\n  if (!payload.body) {\n    // console.log('no payload body')\n    if (cbFinished) {\n      cbFinished({ sent: false })\n    }\n    return false\n  }\n\n  if (!opts) opts = {}\n\n  // console.log(\"_send... getScheme!\", getScheme())\n  var url = getScheme() + '://' + info.errorBeacon + '/' + endpoint + '/1/' + info.licenseKey + baseQueryString()\n  if (payload.qs) url += encodeObj(payload.qs, config.runtime.maxBytes)\n\n  if (!submitMethod) {\n    submitMethod = getSubmitMethod(endpoint, opts)\n  }\n  var method = submitMethod.method\n  var useBody = submitMethod.useBody\n\n  var body\n  var fullUrl = url\n  if (useBody && endpoint === 'events') {\n    body = payload.body.e\n  } else if (useBody) {\n    body = stringify(payload.body)\n  } else {\n    fullUrl = url + encodeObj(payload.body, config.runtime.maxBytes)\n  }\n\n  var result = method(fullUrl, body)\n\n  // console.log('result...', result)\n  if (cbFinished && method === submitData.xhr) {\n    // console.log('in cbFinished')\n    var xhr = result\n    xhr.addEventListener('load', function () {\n      var result = { sent: true }\n      if (this.status === 429) {\n        result.retry = true\n        result.delay = tooManyRequestsDelay\n      } else if (this.status === 408 || this.status === 500 || this.status === 503) {\n        result.retry = true\n      }\n\n      if (opts.needResponse) {\n        result.responseText = this.responseText\n      }\n      cbFinished(result)\n    }, eventListenerOpts(false))\n  }\n\n  // if beacon request failed, retry with an alternative method\n  if (!result && method === submitData.beacon) {\n    method = submitData.img\n    result = method(url + encodeObj(payload.body, config.runtime.maxBytes))\n  }\n\n  return result\n}\n\nexport function getSubmitMethod(endpoint, opts) {\n  opts = opts || {}\n  var method\n  var useBody\n\n  if (opts.needResponse) {\n    if (xhrUsable) {\n      useBody = true\n      method = submitData.xhr\n    } else {\n      return false\n    }\n  } else if (opts.unload) {\n    useBody = haveSendBeacon\n    method = haveSendBeacon ? submitData.beacon : submitData.img\n  } else {\n    // `submitData.beacon` was removed, there is an upper limit to the\n    // number of data allowed before it starts failing, so we save it for\n    // unload data\n    if (xhrUsable) {\n      useBody = true\n      method = submitData.xhr\n    } else if (endpoint === 'events' || endpoint === 'jserrors') {\n      method = submitData.img\n    } else {\n      return false\n    }\n  }\n\n  return {\n    method: method,\n    useBody: useBody\n  }\n}\n\n// Constructs the transaction name param for the beacon URL.\n// Prefers the obfuscated transaction name over the plain text.\n// Falls back to making up a name.\nfunction transactionNameParam (info) {\n  if (info.transactionName) return encodeParam('to', info.transactionName)\n  return encodeParam('t', info.tNamePlain || 'Unnamed Transaction')\n}\n\nexport function on (type, listener) {\n  var listeners = (_events[type] || (_events[type] = []))\n  listeners.push(listener)\n}\n\nexport function resetListeners() {\n  mapOwn(_events, function(key) {\n    _events[key] = []\n  })\n}\n\n// The stuff that gets sent every time.\nexport function baseQueryString () {\n  var areCookiesEnabled = true\n  const init = config.getConfiguration()\n  if ('privacy' in init) {\n    areCookiesEnabled = init.privacy.cookies_enabled\n  }\n\n  var info = config.getInfo()\n\n  return ([\n    '?a=' + info.applicationID,\n    encodeParam('sa', (info.sa ? '' + info.sa : '')),\n    encodeParam('v', version),\n    transactionNameParam(info),\n    encodeParam('ct', config.runtime.customTransaction),\n    '&rst=' + now(),\n    '&ck=' + (areCookiesEnabled ? '1' : '0'),\n    encodeParam('ref', cleanURL(getLocation())),\n    encodeParam('ptid', (config.runtime.ptid ? '' + config.runtime.ptid : ''))\n  ].join(''))\n}\n\n// returns a function that can be called to accumulate values to a single object\n// when the function is called without parameters, then the accumulator is returned\nfunction createAccumulator () {\n  var accumulator = {}\n  var hasData = false\n  return function (key, val) {\n    if (val && val.length) {\n      accumulator[key] = val\n      hasData = true\n    }\n    if (hasData) return accumulator\n  }\n}\n","/*\n * Copyright 2020 New Relic Corporation. All rights reserved.\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { getSubmitMethod, send, sendX } from './harvest'\nimport { submitData } from '../util/submit-data'\n\n/**\n * Periodically invokes harvest calls and handles retries\n */\nexport function HarvestScheduler(endpoint, opts) {\n  console.log('harvest scheduler!')\n  this.endpoint = endpoint\n  this.opts = opts || {}\n  this.started = false\n  this.timeoutHandle = null\n}\n\nHarvestScheduler.prototype.startTimer = function startTimer(interval, initialDelay) {\n  this.interval = interval\n  this.started = true\n  this.scheduleHarvest(initialDelay != null ? initialDelay : this.interval)\n}\n\nHarvestScheduler.prototype.stopTimer = function stopTimer() {\n  this.started = false\n  if (this.timeoutHandle) {\n    clearTimeout(this.timeoutHandle)\n  }\n}\n\nHarvestScheduler.prototype.scheduleHarvest = function scheduleHarvest(delay, opts) {\n  // console.log('schedule harvest!', delay, opts)\n  if (this.timeoutHandle) return\n  var timer = this\n\n  if (delay == null) {\n    delay = this.interval\n  }\n  this.timeoutHandle = setTimeout(function() {\n    timer.timeoutHandle = null\n    timer.runHarvest(opts)\n  }, delay * 1000)\n}\n\nHarvestScheduler.prototype.runHarvest = function runHarvest(opts) {\n  // console.log('run harvest!')\n  var scheduler = this\n\n  if (this.opts.getPayload) {\n    // console.log('getPayload')\n    var submitMethod = getSubmitMethod(this.endpoint, opts)\n    // console.log('submitMethod', submitMethod)\n    if (!submitMethod) return false\n\n    var retry = submitMethod.method === submitData.xhr\n    var payload = this.opts.getPayload({ retry: retry })\n    if (payload) {\n      payload = Object.prototype.toString.call(payload) === '[object Array]' ? payload : [payload]\n      for (var i = 0; i < payload.length; i++) {\n        // console.log('send')\n        send(this.endpoint, payload[i], opts, submitMethod, onHarvestFinished)\n      }\n    }\n  } else {\n    // console.log('sendX')\n    sendX(this.endpoint, opts, onHarvestFinished)\n  }\n\n  if (this.started) {\n    // console.log('started... schedule harvest')\n    this.scheduleHarvest()\n  }\n\n  function onHarvestFinished(result) {\n    scheduler.onHarvestFinished(opts, result)\n  }\n}\n\nHarvestScheduler.prototype.onHarvestFinished = function onHarvestFinished(opts, result) {\n  // console.log('harvest finished!')\n  if (this.opts.onFinished) {\n    this.opts.onFinished(result)\n  }\n\n  if (result.sent && result.retry) {\n    var delay = result.delay || this.opts.retryDelay\n    // reschedule next harvest if should be delayed longer\n    if (this.started && delay) {\n      clearTimeout(this.timeoutHandle)\n      this.timeoutHandle = null\n      this.scheduleHarvest(delay, opts)\n    } else if (!this.started && delay) {\n      // if not running on a timer, schedule a single retry\n      this.scheduleHarvest(delay, opts)\n    }\n  }\n}\n","/*\n * Copyright 2020 New Relic Corporation. All rights reserved.\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport {canonicalFunctionName} from './canonical-function-name'\nimport {computeStackTrace} from './compute-stack-trace'\nimport {stringHashCode} from './string-hash-code'\nimport { truncateSize } from './format-stack-trace'\n\nimport * as agg from '../../../common/aggregate/aggregator'\nimport { registerHandler as register, global } from '../../../common/event-emitter/register-handler'\nimport { on } from '../../../common/harvest/harvest'\nimport { HarvestScheduler } from '../../../common/harvest/harvest-scheduler'\nimport { stringify } from '../../../common/util/stringify'\nimport { handle } from '../../../common/event-emitter/handle'\nimport { mapOwn } from '../../../common/util/map-own'\nimport { getInfo, getConfigurationValue, runtime } from '../../../common/config/config'\nimport { now } from '../../../common/timing/now'\nimport { ee as baseEE } from '../../../common/event-emitter/contextual-ee'\nimport { cleanURL } from '../../../common/url/clean-url'\n\nconsole.log('err-aggregate module has been imported!')\nvar stackReported = {}\nvar pageviewReported = {}\nvar errorCache = {}\nvar currentBody\n\n// Make sure loader.offset is as accurate as possible\n// require('../../../agent/start-time')\n\nvar errorOnPage = false\n\n// ee.on('feat-err', initialize)\n\n// export default {\n//   initialize: initialize,\n//   storeError: storeError\n// }\n\nexport function initialize(captureGlobal) {\n  console.log('errors has been initialized!')\n  register('err', storeError)\n  register('ierr', storeError)\n\n  if (captureGlobal) {\n    global('err', storeError)\n    global('ierr', storeError)\n  }\n\n  var harvestTimeSeconds = getConfigurationValue('jserrors.harvestTimeSeconds') || 10\n\n  on('jserrors', onHarvestStarted)\n  var scheduler = new HarvestScheduler('jserrors', { onFinished: onHarvestFinished })\n  scheduler.startTimer(harvestTimeSeconds)\n}\n\nfunction onHarvestStarted(options) {\n  console.log('onHarvestStarted!')\n  var body = agg.take([ 'err', 'ierr' ])\n\n  if (options.retry) {\n    currentBody = body\n  }\n\n  var payload = { body: body, qs: {} }\n  var releaseIds = stringify(runtime.releaseIds)\n\n  if (releaseIds !== '{}') {\n    payload.qs.ri = releaseIds\n  }\n\n  if (body && body.err && body.err.length && !errorOnPage) {\n    payload.qs.pve = '1'\n    errorOnPage = true\n  }\n  return payload\n}\n\nfunction onHarvestFinished(result) {\n  if (result.retry && currentBody) {\n    mapOwn(currentBody, function(key, value) {\n      for (var i = 0; i < value.length; i++) {\n        var bucket = value[i]\n        var name = getBucketName(bucket.params, bucket.custom)\n        agg.merge(key, name, bucket.metrics, bucket.params, bucket.custom)\n      }\n    })\n    currentBody = null\n  }\n}\n\nfunction nameHash (params) {\n  return stringHashCode(params.exceptionClass) ^ params.stackHash\n}\n\nfunction getBucketName(params, customParams) {\n  return nameHash(params) + ':' + stringHashCode(stringify(customParams))\n}\n\nfunction canonicalizeURL (url, cleanedOrigin) {\n  if (typeof url !== 'string') return ''\n\n  var cleanedURL = cleanURL(url)\n  if (cleanedURL === cleanedOrigin) {\n    return '<inline>'\n  } else {\n    return cleanedURL\n  }\n}\n\nfunction buildCanonicalStackString (stackInfo, cleanedOrigin) {\n  var canonicalStack = ''\n\n  for (var i = 0; i < stackInfo.frames.length; i++) {\n    var frame = stackInfo.frames[i]\n    var func = canonicalFunctionName(frame.func)\n\n    if (canonicalStack) canonicalStack += '\\n'\n    if (func) canonicalStack += func + '@'\n    if (typeof frame.url === 'string') canonicalStack += frame.url\n    if (frame.line) canonicalStack += ':' + frame.line\n  }\n\n  return canonicalStack\n}\n\n// Strip query parameters and fragments from the stackString property of the\n// given stackInfo, along with the 'url' properties of each frame in\n// stackInfo.frames.\n//\n// Any URLs that are equivalent to the cleaned version of the origin will also\n// be replaced with the string '<inline>'.\n//\nfunction canonicalizeStackURLs (stackInfo) {\n  // Currently, loader.origin might contain a fragment, but we don't want to use it\n  // for comparing with frame URLs.\n  var cleanedOrigin = cleanURL(runtime.origin)\n\n  for (var i = 0; i < stackInfo.frames.length; i++) {\n    var frame = stackInfo.frames[i]\n    var originalURL = frame.url\n    var cleanedURL = canonicalizeURL(originalURL, cleanedOrigin)\n    if (cleanedURL && cleanedURL !== frame.url) {\n      frame.url = cleanedURL\n      stackInfo.stackString = stackInfo.stackString.split(originalURL).join(cleanedURL)\n    }\n  }\n\n  return stackInfo\n}\n\nexport function storeError (err, time, internal, customAttributes) {\n  // are we in an interaction\n  time = time || now()\n  if (!internal && runtime.onerror && runtime.onerror(err)) return\n\n  var stackInfo = canonicalizeStackURLs(computeStackTrace(err))\n  var canonicalStack = buildCanonicalStackString(stackInfo)\n\n  var params = {\n    stackHash: stringHashCode(canonicalStack),\n    exceptionClass: stackInfo.name,\n    request_uri: window.location.pathname\n  }\n  if (stackInfo.message) {\n    params.message = '' + stackInfo.message\n  }\n\n  if (!stackReported[params.stackHash]) {\n    stackReported[params.stackHash] = true\n    params.stack_trace = truncateSize(stackInfo.stackString)\n  } else {\n    params.browser_stack_hash = stringHashCode(stackInfo.stackString)\n  }\n  params.releaseIds = stringify(runtime.releaseIds)\n\n  // When debugging stack canonicalization/hashing, uncomment these lines for\n  // more output in the test logs\n  // params.origStack = err.stack\n  // params.canonicalStack = canonicalStack\n\n  var hash = nameHash(params)\n\n  if (!pageviewReported[hash]) {\n    params.pageview = 1\n    pageviewReported[hash] = true\n  }\n\n  var type = internal ? 'ierr' : 'err'\n  var newMetrics = { time: time }\n\n  // stn and spa aggregators listen to this event - stn sends the error in its payload,\n  // and spa annotates the error with interaction info\n  handle('errorAgg', [type, hash, params, newMetrics])\n\n  if (params._interactionId != null) {\n    // hold on to the error until the interaction finishes\n    errorCache[params._interactionId] = errorCache[params._interactionId] || []\n    errorCache[params._interactionId].push([type, hash, params, newMetrics, att, customAttributes])\n  } else {\n    // store custom attributes\n    var customParams = {}\n    var att = getInfo().jsAttributes\n    mapOwn(att, setCustom)\n    if (customAttributes) {\n      mapOwn(customAttributes, setCustom)\n    }\n\n    var jsAttributesHash = stringHashCode(stringify(customParams))\n    var aggregateHash = hash + ':' + jsAttributesHash\n    agg.store(type, aggregateHash, params, newMetrics, customParams)\n  }\n\n  function setCustom (key, val) {\n    customParams[key] = (val && typeof val === 'object' ? stringify(val) : val)\n  }\n}\n\nbaseEE.on('interactionSaved', function (interaction) {\n  if (!errorCache[interaction.id]) return\n\n  errorCache[interaction.id].forEach(function (item) {\n    var customParams = {}\n    var globalCustomParams = item[4]\n    var localCustomParams = item[5]\n\n    mapOwn(globalCustomParams, setCustom)\n    mapOwn(interaction.root.attrs.custom, setCustom)\n    mapOwn(localCustomParams, setCustom)\n\n    var params = item[2]\n    params.browserInteractionId = interaction.root.attrs.id\n    delete params._interactionId\n\n    if (params._interactionNodeId) {\n      params.parentNodeId = params._interactionNodeId.toString()\n      delete params._interactionNodeId\n    }\n\n    var hash = item[1] + interaction.root.attrs.id\n    var jsAttributesHash = stringHashCode(stringify(customParams))\n    var aggregateHash = hash + ':' + jsAttributesHash\n\n    agg.store(item[0], aggregateHash, params, item[3], customParams)\n\n    function setCustom (key, val) {\n      customParams[key] = (val && typeof val === 'object' ? stringify(val) : val)\n    }\n  })\n  delete errorCache[interaction.id]\n})\n\nbaseEE.on('interactionDiscarded', function (interaction) {\n  if (!errorCache[interaction.id]) return\n\n  errorCache[interaction.id].forEach(function (item) {\n    var customParams = {}\n    var globalCustomParams = item[4]\n    var localCustomParams = item[5]\n\n    mapOwn(globalCustomParams, setCustom)\n    mapOwn(interaction.root.attrs.custom, setCustom)\n    mapOwn(localCustomParams, setCustom)\n\n    var params = item[2]\n    delete params._interactionId\n    delete params._interactionNodeId\n\n    var hash = item[1]\n    var jsAttributesHash = stringHashCode(stringify(customParams))\n    var aggregateHash = hash + ':' + jsAttributesHash\n\n    agg.store(item[0], aggregateHash, item[2], item[3], customParams)\n\n    function setCustom (key, val) {\n      customParams[key] = (val && typeof val === 'object' ? stringify(val) : val)\n    }\n  })\n  delete errorCache[interaction.id]\n})\n","/*\n * Copyright 2020 New Relic Corporation. All rights reserved.\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport {global as globalEE} from '../event-emitter/contextual-ee'\nimport slice from 'lodash._slice'\nimport {mapOwn} from '../util/map-own'\nimport { originals } from '../config/config'\nexport var ee = globalEE.get('fetch')\n\nexport default ee\nexport { wrapFetch as wrap }\n\nvar win = window\nvar prefix = 'fetch-'\nvar bodyPrefix = prefix + 'body-'\nvar bodyMethods = ['arrayBuffer', 'blob', 'json', 'text', 'formData']\nvar Req = win.Request\nvar Res = win.Response\n// var fetch = win.fetch\nvar proto = 'prototype'\nvar ctxId = 'nr@context'\n\nexport function wrapGlobal() {\n  // since these are prototype methods, we can only wrap globally\n  mapOwn(bodyMethods, function (i, name) {\n    wrapPromiseMethod(ee, Req[proto], name, bodyPrefix)\n    wrapPromiseMethod(ee, Res[proto], name, bodyPrefix)\n  })\n\n  var wrappedFetch = wrapFetch(ee)\n  win.fetch = wrappedFetch\n}\n\nfunction wrapFetch(ee) {\n  var fn = originals.FETCH\n\n  var wrappedFetch = wrapPromiseMethod(ee, fn, prefix)\n\n  ee.on(prefix + 'end', function (err, res) {\n    var ctx = this\n    if (res) {\n      var size = res.headers.get('content-length')\n      if (size !== null) {\n        ctx.rxSize = size\n      }\n      ee.emit(prefix + 'done', [null, res], ctx)\n    } else {\n      ee.emit(prefix + 'done', [err], ctx)\n    }\n  })\n\n  return wrappedFetch\n}\n\n// this should probably go to the common module as a part of wrapping utility functions\nfunction wrapPromiseMethod(ee, fn, prefix) {\n  return function nrWrapper() {\n    var args = slice(arguments)\n\n    var ctx = {}\n    // we are wrapping args in an array so we can preserve the reference\n    ee.emit(prefix + 'before-start', [args], ctx)\n    var dtPayload\n    if (ctx[ctxId] && ctx[ctxId].dt) dtPayload = ctx[ctxId].dt\n\n    var promise = fn.apply(this, args)\n\n    ee.emit(prefix + 'start', [args, dtPayload], promise)\n\n    return promise.then(function (val) {\n      ee.emit(prefix + 'end', [null, val], promise)\n      return val\n    }, function (err) {\n      ee.emit(prefix + 'end', [err], promise)\n      throw err\n    })\n  }\n}\n","/*\n * Copyright 2020 New Relic Corporation. All rights reserved.\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport {ee} from '../event-emitter/contextual-ee'\nimport slice from 'lodash._slice'\nvar flag = 'nr@original'\nvar has = Object.prototype.hasOwnProperty\nvar inWrapper = false\n\nexport default createWrapperWithEmitter\n\nexport function createWrapperWithEmitter(emitter, always) {\n  emitter || (emitter = ee)\n\n  wrapFn.inPlace = inPlace\n  wrapFn.flag = flag\n\n  return wrapFn\n\n  function wrapFn (fn, prefix, getContext, methodName, bubble) {\n    // Unless fn is both wrappable and unwrapped, return it unchanged.\n    if (notWrappable(fn)) return fn\n\n    if (!prefix) prefix = ''\n\n    nrWrapper[flag] = fn\n    copy(fn, nrWrapper, emitter)\n    return nrWrapper\n\n    function nrWrapper () {\n      var args\n      var originalThis\n      var ctx\n      var result\n\n      try {\n        originalThis = this\n        args = slice(arguments)\n\n        if (typeof getContext === 'function') {\n          ctx = getContext(args, originalThis)\n        } else {\n          ctx = getContext || {}\n        }\n      } catch (e) {\n        report([e, '', [args, originalThis, methodName], ctx], emitter)\n      }\n\n      // Warning: start events may mutate args!\n      safeEmit(prefix + 'start', [args, originalThis, methodName], ctx, bubble)\n\n      try {\n        result = fn.apply(originalThis, args)\n        return result\n      } catch (err) {\n        safeEmit(prefix + 'err', [args, originalThis, err], ctx, bubble)\n\n        // rethrow error so we don't effect execution by observing.\n        throw err\n      } finally {\n        // happens no matter what.\n        safeEmit(prefix + 'end', [args, originalThis, result], ctx, bubble)\n      }\n    }\n  }\n\n  function inPlace (obj, methods, prefix, getContext, bubble) {\n    // console.log('methods!', methods)\n    if (!prefix) prefix = ''\n    // If prefix starts with '-' set this boolean to add the method name to\n    // the prefix before passing each one to wrap.\n    var prependMethodPrefix = (prefix.charAt(0) === '-')\n    var fn\n    var method\n    var i\n\n    for (i = 0; i < methods.length; i++) {\n      method = methods[i]\n      fn = obj[method]\n\n      // Unless fn is both wrappable and unwrapped bail,\n      // so we don't add extra properties with undefined values.\n      if (notWrappable(fn)) continue\n\n      obj[method] = wrapFn(fn, (prependMethodPrefix ? method + prefix : prefix), getContext, method, bubble)\n    }\n  }\n\n  function safeEmit (evt, arr, store, bubble) {\n    if (inWrapper && !always) return\n    var prev = inWrapper\n    inWrapper = true\n    try {\n      emitter.emit(evt, arr, store, always, bubble)\n    } catch (e) {\n      report([e, evt, arr, store], emitter)\n    }\n    inWrapper = prev\n  }\n}\n\nfunction report (args, emitter) {\n  emitter || (emitter = ee)\n  try {\n    emitter.emit('internal-error', args)\n  } catch (err) {}\n}\n\nfunction copy (from, to, emitter) {\n  if (Object.defineProperty && Object.keys) {\n    // Create accessors that proxy to actual function\n    try {\n      var keys = Object.keys(from)\n      keys.forEach(function (key) {\n        Object.defineProperty(to, key, {\n          get: function () { return from[key] },\n          set: function (val) { from[key] = val; return val }\n        })\n      })\n      return to\n    } catch (e) {\n      report([e], emitter)\n    }\n  }\n  // fall back to copying properties\n  for (var i in from) {\n    if (has.call(from, i)) {\n      to[i] = from[i]\n    }\n  }\n  return to\n}\n\nfunction notWrappable (fn) {\n  return !(fn && fn instanceof Function && fn.apply && !fn[flag])\n}\n\nexport function wrapFunction(fn, wrapper) {\n  var wrapped = wrapper(fn)\n  wrapped[flag] = fn\n  copy(fn, wrapped, ee)\n  return wrapped\n}\n\nexport function wrapInPlace(obj, fnName, wrapper) {\n  var fn = obj[fnName]\n  obj[fnName] = wrapFunction(fn, wrapper)\n}\n\nexport function argsToArray() {\n  var len = arguments.length\n  var arr = new Array(len)\n  for (var i = 0; i < len; ++i) {\n    arr[i] = arguments[i]\n  }\n  return arr\n}\n","/*\n * Copyright 2020 New Relic Corporation. All rights reserved.\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport {global as globalEE} from '../event-emitter/contextual-ee'\nimport {createWrapperWithEmitter as wfn} from './wrap-function'\nexport var ee = globalEE.get('timer')\nvar wrapFn = wfn(ee)\n\nvar SET_TIMEOUT = 'setTimeout'\nvar SET_INTERVAL = 'setInterval'\nvar CLEAR_TIMEOUT = 'clearTimeout'\nvar START = '-start'\nvar DASH = '-'\n\nexport default ee\n\n// console.log('wrap timer...')\nwrapFn.inPlace(window, [SET_TIMEOUT, 'setImmediate'], SET_TIMEOUT + DASH)\nwrapFn.inPlace(window, [SET_INTERVAL], SET_INTERVAL + DASH)\nwrapFn.inPlace(window, [CLEAR_TIMEOUT, 'clearImmediate'], CLEAR_TIMEOUT + DASH)\n\nee.on(SET_INTERVAL + START, interval)\nee.on(SET_TIMEOUT + START, timer)\n\nfunction interval (args, obj, type) {\n  args[0] = wrapFn(args[0], 'fn-', null, type)\n}\n\nfunction timer (args, obj, type) {\n  this.method = type\n  this.timerDuration = isNaN(args[1]) ? 0 : +args[1]\n  args[0] = wrapFn(args[0], 'fn-', this, type)\n}\n","/*\n * Copyright 2020 New Relic Corporation. All rights reserved.\n * SPDX-License-Identifier: Apache-2.0\n */\n\n// Request Animation Frame wrapper\nimport {global as globalEE} from '../event-emitter/contextual-ee'\nimport {createWrapperWithEmitter as wfn} from './wrap-function'\nexport var ee = globalEE.get('raf')\nvar wrapFn = wfn(ee)\n\nvar equestAnimationFrame = 'equestAnimationFrame'\n\nexport default ee\n\nwrapFn.inPlace(window, [\n  'r' + equestAnimationFrame,\n  'mozR' + equestAnimationFrame,\n  'webkitR' + equestAnimationFrame,\n  'msR' + equestAnimationFrame\n], 'raf-')\n\nee.on('raf-start', function (args) {\n  // Wrap the callback handed to requestAnimationFrame\n  args[0] = wrapFn(args[0], 'fn-')\n})\n","/*\n * Copyright 2020 New Relic Corporation. All rights reserved.\n * SPDX-License-Identifier: Apache-2.0\n */\n\n// History pushState wrapper\nimport {global as globalEE} from '../event-emitter/contextual-ee'\nimport {createWrapperWithEmitter as wfn} from './wrap-function'\nexport var ee = globalEE.get('history')\nvar wrapFn = wfn(ee)\n\nexport default ee\n\nvar prototype = window.history && window.history.constructor && window.history.constructor.prototype\nvar object = window.history\nif (prototype && prototype.pushState && prototype.replaceState) {\n  object = prototype\n}\n// console.log('wrap history')\nwrapFn.inPlace(object, [ 'pushState', 'replaceState' ], '-')\n","/*\n * Copyright 2020 New Relic Corporation. All rights reserved.\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport {eventListenerOpts} from '../event-listener/event-listener-opts'\nimport {global as globalEE} from '../event-emitter/contextual-ee'\nimport {createWrapperWithEmitter as wfn} from './wrap-function'\n\nexport var ee = globalEE.get('jsonp')\nvar wrapFn = wfn(ee)\n\nexport default ee\n\nvar CALLBACK_REGEX = /[?&](?:callback|cb)=([^&#]+)/\nvar PARENT_REGEX = /(.*)\\.([^.]+)/\nvar VALUE_REGEX = /^(\\w+)(\\.|$)(.*)$/\nvar domInsertMethods = ['appendChild', 'insertBefore', 'replaceChild']\n\nif (shouldWrap()) {\n  wrap()\n}\n\nfunction wrap() {\n  // console.log('wrap jsonp...')\n  // JSONP works by dynamically inserting <script> elements - wrap DOM methods for\n  // inserting elements to detect insertion of JSONP-specific elements.\n  if (Node && Node.prototype && Node.prototype.appendChild) {\n    // console.log('domInsertMethods', domInsertMethods)\n    wrapFn.inPlace(Node.prototype, domInsertMethods, 'dom-')\n  } else {\n    wrapFn.inPlace(HTMLElement.prototype, domInsertMethods, 'dom-')\n    wrapFn.inPlace(HTMLHeadElement.prototype, domInsertMethods, 'dom-')\n    wrapFn.inPlace(HTMLBodyElement.prototype, domInsertMethods, 'dom-')\n  }\n}\n\nee.on('dom-start', function (args) {\n  wrapElement(args[0])\n})\n\n// subscribe to events on the JSONP <script> element and wrap the JSONP callback\n// in order to track start and end of the interaction node\nfunction wrapElement (el) {\n  // console.log('wrapElement')\n  var isScript = el && typeof el.nodeName === 'string' &&\n    el.nodeName.toLowerCase() === 'script'\n  if (!isScript) return\n\n  var isValidElement = typeof el.addEventListener === 'function'\n  if (!isValidElement) return\n\n  var callbackName = extractCallbackName(el.src)\n  if (!callbackName) return\n\n  var callback = discoverParent(callbackName)\n  var validCallback = typeof callback.parent[callback.key] === 'function'\n  if (!validCallback) return\n\n  // At this point we know that the element is a valid JSONP script element.\n  // The following events are emitted during the lifetime of a JSONP call:\n  // * immediately emit `new-jsonp` to notify start of the JSONP work\n  // * the wrapped callback will emit `cb-start` and `cb-end` during the execution\n  //   of the callback, here we can inspect the response\n  // * when the element emits the `load` event (script loaded and executed),\n  //   emit `jsonp-end` to notify end of the JSONP work\n  // * if the element emits the `error` event, in response emit `jsonp-error`\n  //   (and `jsonp-end`). Note that the callback in this case will likely not get\n  //   called.\n\n  var context = {}\n  // console.log('wrap jsonp...')\n  // console.log('callback.key', callback.key)\n  wrapFn.inPlace(callback.parent, [callback.key], 'cb-', context)\n\n  el.addEventListener('load', onLoad, eventListenerOpts(false))\n  el.addEventListener('error', onError, eventListenerOpts(false))\n  ee.emit('new-jsonp', [el.src], context)\n\n  function onLoad () {\n    ee.emit('jsonp-end', [], context)\n    el.removeEventListener('load', onLoad, eventListenerOpts(false))\n    el.removeEventListener('error', onError, eventListenerOpts(false))\n  }\n\n  function onError () {\n    ee.emit('jsonp-error', [], context)\n    ee.emit('jsonp-end', [], context)\n    el.removeEventListener('load', onLoad, eventListenerOpts(false))\n    el.removeEventListener('error', onError, eventListenerOpts(false))\n  }\n}\n\nfunction shouldWrap () {\n  return 'addEventListener' in window\n}\n\nfunction extractCallbackName (src) {\n  var matches = src.match(CALLBACK_REGEX)\n  return matches ? matches[1] : null\n}\n\nfunction discoverValue (longKey, obj) {\n  var matches = longKey.match(VALUE_REGEX)\n  var key = matches[1]\n  var remaining = matches[3]\n  if (!remaining) {\n    return obj[key]\n  }\n  return discoverValue(remaining, obj[key])\n}\n\nfunction discoverParent (key) {\n  var matches = key.match(PARENT_REGEX)\n  if (matches && matches.length >= 3) {\n    return {\n      key: matches[2],\n      parent: discoverValue(matches[1], window)\n    }\n  }\n  return {\n    key: key,\n    parent: window\n  }\n}\n","/*\n * Copyright 2020 New Relic Corporation. All rights reserved.\n * SPDX-License-Identifier: Apache-2.0\n */\nimport {global as globalEE} from '../event-emitter/contextual-ee'\nimport {createWrapperWithEmitter as wfn} from './wrap-function'\nimport {originals} from '../config/config'\n\nexport var ee = globalEE.get('mutation')\nvar wrapFn = wfn(ee)\nvar OriginalObserver = originals.MO\n\nexport default ee\n\nif (OriginalObserver) {\n  window.MutationObserver = function WrappedMutationObserver (cb) {\n    if (this instanceof OriginalObserver) {\n      return new OriginalObserver(wrapFn(cb, 'fn-'))\n    } else {\n      return OriginalObserver.apply(this, arguments)\n    }\n  }\n\n  MutationObserver.prototype = OriginalObserver.prototype\n}\n","/*\n * Copyright 2020 New Relic Corporation. All rights reserved.\n * SPDX-License-Identifier: Apache-2.0\n */\nimport {createWrapperWithEmitter as wrapFn, wrapInPlace, argsToArray} from './wrap-function'\nimport {global as globalEE, getOrSetContext} from '../event-emitter/contextual-ee'\nimport {mapOwn} from '../util/map-own'\nimport {originals} from '../config/config'\nexport var promiseEE = globalEE.get('promise')\nvar getContext = getOrSetContext\nvar promiseWrapper = wrapFn(promiseEE)\nvar OriginalPromise = originals.PR\n\nexport default promiseEE\n\nif (OriginalPromise) {\n  wrap()\n}\n\nfunction wrap() {\n  window.Promise = WrappedPromise\n\n  ;['all', 'race'].forEach(function (method) {\n    var original = OriginalPromise[method]\n    OriginalPromise[method] = function (subPromises) {\n      var finalized = false\n      mapOwn(subPromises, function (i, sub) {\n        Promise.resolve(sub).then(setNrId(method === 'all'), setNrId(false))\n      })\n\n      var originalReturnValue = original.apply(OriginalPromise, arguments)\n      var promise = OriginalPromise.resolve(originalReturnValue)\n\n      return promise\n\n      function setNrId (overwrite) {\n        return function () {\n          promiseEE.emit('propagate', [null, !finalized], originalReturnValue, false, false)\n          finalized = finalized || !overwrite\n        }\n      }\n    }\n  })\n\n  ;['resolve', 'reject'].forEach(function (method) {\n    var original = OriginalPromise[method]\n    OriginalPromise[method] = function (val) {\n      var returnVal = original.apply(OriginalPromise, arguments)\n      if (val !== returnVal) {\n        promiseEE.emit('propagate', [val, true], returnVal, false, false)\n      }\n\n      return returnVal\n    }\n  })\n\n  OriginalPromise.prototype['catch'] = function wrappedCatch (fn) {\n    return this.then(null, fn)\n  }\n\n  Object.assign(OriginalPromise.prototype, {constructor: {value: WrappedPromise}})\n  // OriginalPromise.prototype = Object.create(OriginalPromise.prototype, {\n  //   constructor: {value: WrappedPromise}\n  // })\n\n  mapOwn(Object.getOwnPropertyNames(OriginalPromise), function copy (i, key) {\n    try {\n      WrappedPromise[key] = OriginalPromise[key]\n    } catch (err) {\n      // ignore properties we can't copy\n    }\n  })\n\n  function WrappedPromise (executor) {\n    var ctx = promiseEE.context()\n    var wrappedExecutor = promiseWrapper(executor, 'executor-', ctx, null, false)\n\n    var promise = new OriginalPromise(wrappedExecutor)\n\n    promiseEE.context(promise).getCtx = function () {\n      return ctx\n    }\n\n    return promise\n  }\n\n  wrapInPlace(OriginalPromise.prototype, 'then', function wrapThen(original) {\n    return function wrappedThen() {\n      var originalThis = this\n      var args = argsToArray.apply(this, arguments)\n\n      var ctx = getContext(originalThis)\n      ctx.promise = originalThis\n      args[0] = promiseWrapper(args[0], 'cb-', ctx, null, false)\n      args[1] = promiseWrapper(args[1], 'cb-', ctx, null, false)\n\n      var result = original.apply(this, args)\n\n      ctx.nextPromise = result\n      promiseEE.emit('propagate', [originalThis, true], result, false, false)\n\n      return result\n    }\n  })\n\n  promiseEE.on('executor-start', function (args) {\n    args[0] = promiseWrapper(args[0], 'resolve-', this, null, false)\n    args[1] = promiseWrapper(args[1], 'resolve-', this, null, false)\n  })\n\n  promiseEE.on('executor-err', function (args, originalThis, err) {\n    args[1](err)\n  })\n\n  promiseEE.on('cb-end', function (args, originalThis, result) {\n    promiseEE.emit('propagate', [result, true], this.nextPromise, false, false)\n  })\n\n  promiseEE.on('propagate', function (val, overwrite, trigger) {\n    if (!this.getCtx || overwrite) {\n      this.getCtx = function () {\n        if (val instanceof Promise) {\n          var store = promiseEE.context(val)\n        }\n\n        return store && store.getCtx ? store.getCtx() : this\n      }\n    }\n  })\n\n  WrappedPromise.toString = function () {\n    return '' + OriginalPromise\n  }\n}\n","/*\n * Copyright 2020 New Relic Corporation. All rights reserved.\n * SPDX-License-Identifier: Apache-2.0\n */\n\n// console.log('wrap events!')\nimport {global as globalEE} from '../event-emitter/contextual-ee'\nimport {createWrapperWithEmitter as wfn} from './wrap-function'\nimport {getOrSet} from '../util/get-or-set'\nexport var ee = globalEE.get('events')\nvar wrapFn = wfn(ee, true)\n\nvar XHR = XMLHttpRequest\nvar ADD_EVENT_LISTENER = 'addEventListener'\nvar REMOVE_EVENT_LISTENER = 'removeEventListener'\n\nexport default ee\n\n// Guard against instrumenting environments w/o necessary features\nif ('getPrototypeOf' in Object) {\n  findAndWrapNode(document)\n  findAndWrapNode(window)\n  findAndWrapNode(XHR.prototype)\n} else if (XHR.prototype.hasOwnProperty(ADD_EVENT_LISTENER)) {\n  wrapNode(window)\n  wrapNode(XHR.prototype)\n}\n\nee.on(ADD_EVENT_LISTENER + '-start', function (args, target) {\n  var originalListener = args[1]\n  if (originalListener === null ||\n    (typeof originalListener !== 'function' && typeof originalListener !== 'object')\n  ) {\n    return\n  }\n\n  var wrapped = getOrSet(originalListener, 'nr@wrapped', function () {\n    var listener = {\n      object: wrapHandleEvent,\n      'function': originalListener\n    }[typeof originalListener]\n\n    return listener ? wrapFn(listener, 'fn-', null, (listener.name || 'anonymous')) : originalListener\n\n    function wrapHandleEvent () {\n      if (typeof originalListener.handleEvent !== 'function') return\n      return originalListener.handleEvent.apply(originalListener, arguments)\n    }\n  })\n\n  this.wrapped = args[1] = wrapped\n})\n\nee.on(REMOVE_EVENT_LISTENER + '-start', function (args) {\n  args[1] = this.wrapped || args[1]\n})\n\nfunction findAndWrapNode (object) {\n  var step = object\n  while (step && !step.hasOwnProperty(ADD_EVENT_LISTENER)) { step = Object.getPrototypeOf(step) }\n  if (step) { wrapNode(step) }\n}\n\nfunction wrapNode (node) {\n  // console.log('wrap events...')\n  wrapFn.inPlace(node, [ADD_EVENT_LISTENER, REMOVE_EVENT_LISTENER], '-', uniqueListener)\n}\n\nfunction uniqueListener (args, obj) {\n  // Context for the listener is stored on itself.\n  return args[1]\n}\n","/*\n * Copyright 2020 New Relic Corporation. All rights reserved.\n * SPDX-License-Identifier: Apache-2.0\n */\n\n// wrap-events patches XMLHttpRequest.prototype.addEventListener for us.\nimport './wrap-events'\n// import * as config from '../config'\nimport {global as globalEE} from '../event-emitter/contextual-ee'\nimport {eventListenerOpts} from '../event-listener/event-listener-opts'\nimport {createWrapperWithEmitter as wfn} from './wrap-function'\nimport {originals} from '../config/config'\n\nvar baseEE = globalEE\nexport var ee = baseEE.get('xhr')\nvar wrapFn = wfn(ee)\n\nvar OrigXHR = originals.XHR\nvar MutationObserver = originals.MO\nvar Promise = originals.PR\nvar setImmediate = originals.SI\n\nvar READY_STATE_CHANGE = 'readystatechange'\n\nvar handlers = ['onload', 'onerror', 'onabort', 'onloadstart', 'onloadend', 'onprogress', 'ontimeout']\nvar pendingXhrs = []\n\nexport default ee\n\nvar XHR = window.XMLHttpRequest = function (opts) {\n  var xhr = new OrigXHR(opts)\n  try {\n    ee.emit('new-xhr', [xhr], xhr)\n    xhr.addEventListener(READY_STATE_CHANGE, wrapXHR, eventListenerOpts(false))\n  } catch (e) {\n    try {\n      ee.emit('internal-error', [e])\n    } catch (err) {}\n  }\n  return xhr\n}\n\ncopy(OrigXHR, XHR)\n\nXHR.prototype = OrigXHR.prototype\n\n// console.log('wrap xhr...')\nwrapFn.inPlace(XHR.prototype, ['open', 'send'], '-xhr-', getObject)\n\nee.on('send-xhr-start', function (args, xhr) {\n  wrapOnreadystatechange(args, xhr)\n  enqueuePendingXhr(xhr)\n})\nee.on('open-xhr-start', wrapOnreadystatechange)\n\nfunction wrapOnreadystatechange (args, xhr) {\n  wrapFn.inPlace(xhr, ['onreadystatechange'], 'fn-', getObject)\n}\n\nfunction wrapXHR () {\n  var xhr = this\n  var ctx = ee.context(xhr)\n\n  if (xhr.readyState > 3 && !ctx.resolved) {\n    ctx.resolved = true\n    ee.emit('xhr-resolved', [], xhr)\n  }\n\n  wrapFn.inPlace(xhr, handlers, 'fn-', getObject)\n}\n\n// Wrapping the onreadystatechange property of XHRs takes some special tricks.\n//\n// The issue is that the onreadystatechange property may be assigned *after*\n// send() is called against an XHR. This is of particular importance because\n// jQuery uses a single onreadystatechange handler to implement all of the XHR\n// callbacks thtat it provides, and it assigns that property after calling send.\n//\n// There are several 'obvious' approaches to wrapping the onreadystatechange\n// when it's assigned after send:\n//\n// 1. Try to wrap the onreadystatechange handler from a readystatechange\n//    addEventListener callback (the addEventListener callback will fire before\n//    the onreadystatechange callback).\n//\n//      Caveat: this doesn't work in Chrome or Safari, and in fact will cause\n//      the onreadystatechange handler to not be invoked at all during the\n//      firing cycle in which it is wrapped, which may break applications :(\n//\n// 2. Use Object.defineProperty to create a setter for the onreadystatechange\n//    property, and wrap from that setter.\n//\n//      Caveat: onreadystatechange is not a configurable property in Safari or\n//      older versions of the Android browser.\n//\n// 3. Schedule wrapping of the onreadystatechange property using a setTimeout\n//    call issued just before the call to send.\n//\n//      Caveat: sometimes, the onreadystatechange handler fires before the\n//      setTimeout, meaning the wrapping happens too late.\n//\n// The setTimeout approach is closest to what we use here: we want to schedule\n// the wrapping of the onreadystatechange property when send is called, but\n// ensure that our wrapping happens before onreadystatechange has a chance to\n// fire.\n//\n// We achieve this using a hybrid approach:\n//\n// * In browsers that support MutationObserver, we use that to schedule wrapping\n//   of onreadystatechange.\n//\n// * We have discovered that MutationObserver in IE causes a memory leak, so we\n//   now will prefer setImmediate for IE, and use a resolved promise to schedule\n//   the wrapping in Edge (and other browsers that support promises)\n//\n// * In older browsers that don't support MutationObserver, we rely on the fact\n//   that the call to send is probably happening within a callback that we've\n//   already wrapped, and use our existing fn-end event callback to wrap the\n//   onreadystatechange at the end of the current callback.\n//\n\nif (MutationObserver) {\n  var resolved = Promise && Promise.resolve()\n  if (!setImmediate && !Promise) {\n    var toggle = 1\n    var dummyNode = document.createTextNode(toggle)\n    new MutationObserver(drainPendingXhrs).observe(dummyNode, { characterData: true })\n  }\n} else {\n  baseEE.on('fn-end', function (args) {\n    // We don't want to try to wrap onreadystatechange from within a\n    // readystatechange callback.\n    if (args[0] && args[0].type === READY_STATE_CHANGE) return\n    drainPendingXhrs()\n  })\n}\n\nfunction enqueuePendingXhr (xhr) {\n  pendingXhrs.push(xhr)\n  if (MutationObserver) {\n    if (resolved) {\n      resolved.then(drainPendingXhrs)\n    } else if (setImmediate) {\n      setImmediate(drainPendingXhrs)\n    } else {\n      toggle = -toggle\n      dummyNode.data = toggle\n    }\n  }\n}\n\nfunction drainPendingXhrs () {\n  for (var i = 0; i < pendingXhrs.length; i++) {\n    wrapOnreadystatechange([], pendingXhrs[i])\n  }\n  if (pendingXhrs.length) pendingXhrs = []\n}\n\n// Use the object these methods are on as their\n// context store for the event emitter\nfunction getObject (args, obj) {\n  return obj\n}\n\nfunction copy (from, to) {\n  for (var i in from) {\n    to[i] = from[i]\n  }\n  return to\n}\n","\n\n\nimport {wrap} from './wrap-fetch'\nimport wt from './wrap-timer'\nimport wr from './wrap-raf'\nimport wh from './wrap-history'\nimport wj from './wrap-jsonp'\nimport wm from './wrap-mutation'\nimport wp from './wrap-promise'\nimport wx from './wrap-xhr'\nimport we from './wrap-events'\n\nexport {wrapGlobal as wrapGlobalFetch} from './wrap-fetch'\n\nexport function wrapGlobalEvents() {\n  return we\n}\n\nexport function wrapFetch(ee) {\n  // return import('./wrap-fetch').then(module => module.wrap(ee))\n  wrap(ee)\n}\n\nexport function wrapHistory() {\n  return wh\n}\n\nexport function wrapJson() {\n  return wj\n}\n\nexport function wrapMutation() {\n  return wm\n}\n\nexport function wrapPromise() {\n  return wp\n}\n\nexport function wrapRaf() {\n  return wr\n}\n\nexport function wrapTimer() {\n  return wt\n}\n\nexport function wrapXhr() {\n  return wx\n}\n","/*\n * Copyright 2020 New Relic Corporation. All rights reserved.\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport {ee} from '../../../common/event-emitter/contextual-ee'\nimport { mapOwn } from '../../../common/util/map-own'\n\nvar flags = {}\nvar flagArr\n\ntry {\n  flagArr = localStorage.getItem('__nr_flags').split(',')\n  if (console && typeof console.log === 'function') {\n    flags.console = true\n    if (flagArr.indexOf('dev') !== -1) flags.dev = true\n    if (flagArr.indexOf('nr_dev') !== -1) flags.nrDev = true\n  }\n} catch (err) {\n  // no op\n}\n\nif (flags.nrDev) ee.on('internal-error', function (err) { log(err.stack) })\nif (flags.dev) ee.on('fn-err', function (args, origThis, err) { log(err.stack) })\nif (flags.dev) {\n  log('NR AGENT IN DEVELOPMENT MODE')\n  log('flags: ' + mapOwn(flags, function (key, val) { return key }).join(', '))\n}\n\nfunction log (message) {\n  try {\n    if (flags.console) console.log(message)\n  } catch (err) {\n    // no op\n  }\n}\n","/*\n * Copyright 2020 New Relic Corporation. All rights reserved.\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { global as handle } from '../../../common/event-emitter/handle'\nimport { global as ee } from '../../../common/event-emitter/contextual-ee'\nimport { runtime } from '../../../common/config/config'\nimport { now } from '../../../common/timing/now'\nimport { getOrSet } from '../../../common/util/get-or-set'\nimport { wrapRaf as wrapGlobalRaf, wrapTimer as wrapGlobalTimers, wrapGlobalEvents, wrapXhr } from '../../../common/wrap'\nimport slice from 'lodash._slice'\nimport './debug'\n\nvar origOnerror = window.onerror\nvar handleErrors = false\nvar NR_ERR_PROP = 'nr@seenError'\n\n// skipNext counter to keep track of uncaught\n// errors that will be the same as caught errors.\nvar skipNext = 0\n\n// export default {\n//   initialize: initialize\n// }\n\nexport function initialize() {\n  // Declare that we are using err instrumentation\n  // require('./debug')\n\n  window.onerror = onerrorHandler\n\n  try {\n    throw new Error()\n  } catch (e) {\n    // Only wrap stuff if try/catch gives us useful data. It doesn't in IE < 10.\n    if ('stack' in e) {\n      wrapGlobalTimers()\n      wrapGlobalRaf()\n\n      if ('addEventListener' in window) {\n        wrapGlobalEvents()\n      }\n\n      if (runtime.xhrWrappable) {\n        wrapXhr()\n      }\n\n      handleErrors = true\n    }\n  }\n}\n\nee.on('fn-start', function (args, obj, methodName) {\n  if (handleErrors) skipNext += 1\n})\n\nee.on('fn-err', function (args, obj, err) {\n  if (handleErrors && !err[NR_ERR_PROP]) {\n    getOrSet(err, NR_ERR_PROP, function getVal () {\n      return true\n    })\n    this.thrown = true\n    notice(err)\n  }\n})\n\nee.on('fn-end', function () {\n  if (!handleErrors) return\n  if (!this.thrown && skipNext > 0) skipNext -= 1\n})\n\nee.on('internal-error', function (e) {\n  handle('ierr', [e, now(), true])\n})\n\n// FF and Android browsers do not provide error info to the 'error' event callback,\n// so we must use window.onerror\nfunction onerrorHandler (message, filename, lineno, column, errorObj) {\n  try {\n    if (skipNext) skipNext -= 1\n    else notice(errorObj || new UncaughtException(message, filename, lineno), true)\n  } catch (e) {\n    try {\n      handle('ierr', [e, now(), true])\n    } catch (err) {\n    }\n  }\n\n  if (typeof origOnerror === 'function') return origOnerror.apply(this, slice(arguments))\n  return false\n}\n\nfunction UncaughtException (message, filename, lineno) {\n  this.message = message || 'Uncaught error with no additional information'\n  this.sourceURL = filename\n  this.line = lineno\n}\n\n// emits 'handle > error' event, which the error aggregator listens on\nfunction notice (err, doNotStamp) {\n  // by default add timestamp, unless specifically told not to\n  // this is to preserve existing behavior\n  var time = (!doNotStamp) ? now() : null\n  handle('err', [err, time])\n}\n","/**\n * Lo-Dash 2.4.1 (Custom Build) <http://lodash.com/>\n * Build: `lodash modularize modern exports=\"npm\" -o ./npm/`\n * Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>\n * Based on Underscore.js 1.5.2 <http://underscorejs.org/LICENSE>\n * Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n * Available under MIT license <http://lodash.com/license>\n */\n\n/**\n * Slices the `collection` from the `start` index up to, but not including,\n * the `end` index.\n *\n * Note: This function is used instead of `Array#slice` to support node lists\n * in IE < 9 and to ensure dense arrays are returned.\n *\n * @private\n * @param {Array|Object|string} collection The collection to slice.\n * @param {number} start The start index.\n * @param {number} end The end index.\n * @returns {Array} Returns the new array.\n */\nfunction slice(array, start, end) {\n  start || (start = 0);\n  if (typeof end == 'undefined') {\n    end = array ? array.length : 0;\n  }\n  var index = -1,\n      length = end - start || 0,\n      result = Array(length < 0 ? 0 : length);\n\n  while (++index < length) {\n    result[index] = array[start + index];\n  }\n  return result;\n}\n\nmodule.exports = slice;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.init = void 0;\nvar config_1 = require(\"../../../modules/common/config/config\");\nvar ie_version_1 = require(\"../../../modules/common/browser-version/ie-version\");\nvar types_1 = require(\"./types\");\nvar api_defaults_1 = require(\"./utils/api-defaults\");\nif (ie_version_1.ieVersion === 6)\n    config_1.runtime.maxBytes = 2000;\nelse\n    config_1.runtime.maxBytes = 30000;\nvar initialized = false;\nvar _enabledFeatures = [\n    types_1.NrFeatures.AJAX, types_1.NrFeatures.JSERRORS, types_1.NrFeatures.PAGE_VIEW_EVENT, types_1.NrFeatures.PAGE_VIEW_TIMING\n];\n// let _disabledFeatures: NrFeatures[] = []\nvar nr = {\n    disable: function (features) {\n        if (initialized)\n            return console.error(\"Features must be disabled before starting the NR Agent\");\n        if (Array.isArray(features))\n            _enabledFeatures = _enabledFeatures.filter(function (f) { return !features.includes(f); });\n        else\n            _enabledFeatures = _enabledFeatures.filter(function (f) { return features !== f; });\n    },\n    get features() {\n        return _enabledFeatures;\n    },\n    start: initialize,\n    storeError: api_defaults_1.storeError\n};\nexports.default = nr;\nfunction initialize(_a) {\n    var info = _a.info, config = _a.config, loader_config = _a.loader_config;\n    return __awaiter(this, void 0, void 0, function () {\n        return __generator(this, function (_b) {\n            switch (_b.label) {\n                case 0:\n                    if (initialized)\n                        return [2 /*return*/];\n                    (0, config_1.setInfo)(info);\n                    if (config)\n                        (0, config_1.setConfiguration)(config);\n                    if (loader_config)\n                        (0, config_1.setLoaderConfig)(config);\n                    return [4 /*yield*/, initializeFeatures()];\n                case 1:\n                    _b.sent();\n                    initialized = true;\n                    return [4 /*yield*/, (0, api_defaults_1.initialize)(_enabledFeatures)];\n                case 2:\n                    _b.sent();\n                    console.log(\"initialized API!\");\n                    return [2 /*return*/];\n            }\n        });\n    });\n}\nexports.init = initialize;\nfunction initializeFeatures() {\n    var _this = this;\n    return Promise.all(_enabledFeatures.map(function (feature) { return __awaiter(_this, void 0, void 0, function () {\n        var initializeInstrument, initializeAggregate;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    if (!(feature === types_1.NrFeatures.JSERRORS)) return [3 /*break*/, 3];\n                    return [4 /*yield*/, Promise.resolve().then(function () { return __importStar(require('../../../modules/features/js-errors/instrument')); })];\n                case 1:\n                    initializeInstrument = (_a.sent()).initialize;\n                    initializeInstrument();\n                    return [4 /*yield*/, Promise.resolve().then(function () { return __importStar(require('../../../modules/features/js-errors/aggregate')); })];\n                case 2:\n                    initializeAggregate = (_a.sent()).initialize;\n                    initializeAggregate(true);\n                    _a.label = 3;\n                case 3: return [2 /*return*/];\n            }\n        });\n    }); }));\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.NrFeatures = void 0;\nvar NrFeatures;\n(function (NrFeatures) {\n    NrFeatures[\"JSERRORS\"] = \"JSERRORS\";\n    NrFeatures[\"AJAX\"] = \"AJAX\";\n    NrFeatures[\"PAGE_VIEW_EVENT\"] = \"PAGE_VIEW_EVENT\";\n    NrFeatures[\"PAGE_VIEW_TIMING\"] = \"PAGE_VIEW_TIMING\";\n})(NrFeatures = exports.NrFeatures || (exports.NrFeatures = {}));\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.storeError = exports.initialize = void 0;\nvar types_1 = require(\"../types\");\n// export function recordError(err: string | Error, customAttributes, time) {\n//     if (typeof err === 'string') err = new Error(err)\n//     recordSupportability('API/noticeError/called')\n//     time = time || now()\n//     handle('err', [err, time, false, customAttributes])\n//   }\n// export function recordPageAction() {\n// }\nvar initialized = false;\nvar api = {\n    storeError: null\n};\nfunction initialize(features) {\n    return __awaiter(this, void 0, void 0, function () {\n        var _this = this;\n        return __generator(this, function (_a) {\n            console.log(\"initialized agent! Setting up API!\");\n            initialized = true;\n            return [2 /*return*/, Promise.all(features.map(function (feature) { return __awaiter(_this, void 0, void 0, function () {\n                    var storeError_1;\n                    return __generator(this, function (_a) {\n                        switch (_a.label) {\n                            case 0:\n                                if (!(feature === types_1.NrFeatures.JSERRORS)) return [3 /*break*/, 2];\n                                return [4 /*yield*/, Promise.resolve().then(function () { return __importStar(require('../../../../modules/features/js-errors/aggregate')); })];\n                            case 1:\n                                storeError_1 = (_a.sent()).storeError;\n                                api.storeError = storeError_1;\n                                _a.label = 2;\n                            case 2: return [2 /*return*/];\n                        }\n                    });\n                }); }))];\n        });\n    });\n}\nexports.initialize = initialize;\nfunction storeError(err, time, internal, customAttributes) {\n    if (initialized && !!api.storeError)\n        return api.storeError(err, time, internal, customAttributes);\n    // if the agent has not been started, the source API method will have not been loaded...\n    if (!initialized && !api.storeError)\n        return notInitialized(types_1.NrFeatures.JSERRORS);\n    // if the error feature module is disabled, this function throws a warning message\n    if (initialized && !api.storeError)\n        return isDisabled(types_1.NrFeatures.JSERRORS, 'storeError');\n}\nexports.storeError = storeError;\nfunction notInitialized(featureName) {\n    console.warn(\"You are calling a \".concat(featureName, \" Feature API, but the Browser Agent has not been started... Please start the agent using .start({...opts})\"));\n}\nfunction isDisabled(featureName, methodName) {\n    console.warn(\"The \".concat(featureName, \" Feature of the New Relic Browser Agent Has Been Disabled. Method \\\"\").concat(methodName, \"\\\" will not do anything!\"));\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(590);\n",""],"names":[],"sourceRoot":""}